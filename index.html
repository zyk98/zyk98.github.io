<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="ZYK的博客">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="ZYK的博客">
<meta property="og:locale">
<meta property="article:author" content="ZYK">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://example.com/"/>





  <title>ZYK的博客</title>
  








<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZYK的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95java/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZYK的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95java/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-14T11:59:44+08:00">
                2021-03-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="常用算法"><a href="#常用算法" class="headerlink" title="常用算法"></a>常用算法</h1><h5 id="分治算法-divide-and-conquer"><a href="#分治算法-divide-and-conquer" class="headerlink" title="分治算法(divide and conquer)"></a>分治算法(divide and conquer)</h5><p>汉诺塔：每次游戏都可以看成一种模板：即最下边的盘 + 上面所有的盘</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/03/2d9a1b23a93b18915b1e72961899ee46-image-20210203212424761-ab66ed.png" alt="image-20210203212424761"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//汉诺塔问题</span></span><br><span class="line"><span class="comment">//如果我们有 n &gt;= 2 情况，我们总是可以看做是两个盘 1.最下边的一个盘 2. 上面的所有盘</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hanoitower</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		hanoiTower(<span class="number">10</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hanoiTower</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">char</span> a, <span class="keyword">char</span> b, <span class="keyword">char</span> c)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(num == <span class="number">1</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;第1个盘从 &quot;</span> + a + <span class="string">&quot;-&gt;&quot;</span> + c);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">//1. 先把 最上面的所有盘 A-&gt;B， 移动过程会使用到 c</span></span><br><span class="line">			hanoiTower(num - <span class="number">1</span>, a, c, b);</span><br><span class="line">			<span class="comment">//2. 把最下边的盘 A-&gt;C</span></span><br><span class="line">			System.out.println(<span class="string">&quot;第&quot;</span> + num + <span class="string">&quot;个盘从 &quot;</span> + a + <span class="string">&quot;-&gt;&quot;</span> + c);</span><br><span class="line">			<span class="comment">//3. 把B塔的所有盘 从 B-&gt;C , 移动过程使用到 a塔  </span></span><br><span class="line">			hanoiTower(num - <span class="number">1</span>, b, a, c);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="动态规划-Dynamic-Programming"><a href="#动态规划-Dynamic-Programming" class="headerlink" title="动态规划(Dynamic Programming)"></a>动态规划(Dynamic Programming)</h5><p>背包问题</p>
<ul>
<li><p>01背包：每个物品最多放一个</p>
</li>
<li><p>完全背包：每个物品无限次使用</p>
</li>
</ul>
<p>01背包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">能放的下，dp[i][j] &#x3D; Math.max(dp[i-1][j], dp[i-1][j-w[i]]+p[i])；放不下，dp[i][j] &#x3D; dp[i-1][j]；</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">PackageHelper</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> w[], <span class="keyword">int</span> p[], <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//设置一个二维数组，横坐标i代表从第一个物品开始放到第几个物品，纵坐标j代表背包还有多少容量，dp代表最大价值</span></span><br><span class="line">    <span class="keyword">int</span> dp[][] = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>][v + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n + <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= v; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (j &gt;= w[i]) &#123;<span class="comment">//当能放得下这个物品时，放下这个物品，价值增加，但是空间减小，最大价值是dp[i-1][j-w[i]]+p[i]</span></span><br><span class="line">                dp[i][j] = Math.max(dp[i - <span class="number">1</span>][j], dp[i - <span class="number">1</span>][j - w[i]] + p[i]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//如果放不下，就是放上一个物品时的dp,是dp[i-1][j]</span></span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n][v];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>优化：滚动数组，只创建一个一维数组，长度为从1到W，初始值都是0，能装得下i时，dp[j] = Math.max(dp[j], dp[j-w[i]]+p[i])；装不下时，dp[j] = dp[j];</p>
<p>参考链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a66d5ce49df5">https://www.jianshu.com/p/a66d5ce49df5</a></p>
<h5 id="KMP算法"><a href="#KMP算法" class="headerlink" title="KMP算法"></a>KMP算法</h5><h5 id="贪心算法-greedy-：某个状态以后的过程不会影响以前的状态，只与当前状态有关"><a href="#贪心算法-greedy-：某个状态以后的过程不会影响以前的状态，只与当前状态有关" class="headerlink" title="贪心算法(greedy)：某个状态以后的过程不会影响以前的状态，只与当前状态有关"></a>贪心算法(greedy)：某个状态以后的过程不会影响以前的状态，只与当前状态有关</h5><p>分饼干、跳跃路径</p>
<h5 id="普利姆算法-prim-，解决最小生成树——————选点构成图"><a href="#普利姆算法-prim-，解决最小生成树——————选点构成图" class="headerlink" title="普利姆算法(prim)，解决最小生成树——————选点构成图"></a>普利姆算法(prim)，解决最小生成树——————选点构成图</h5><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/09/d3c4772d46d01105eb86ed8322998b70-image-20210209134356170-1074fb.png" alt="image-20210209134356170"></p>
<h5 id="克鲁斯卡尔算法-Kruskal-，解决最小生成树————————选边构成图"><a href="#克鲁斯卡尔算法-Kruskal-，解决最小生成树————————选边构成图" class="headerlink" title="克鲁斯卡尔算法(Kruskal)，解决最小生成树————————选边构成图"></a>克鲁斯卡尔算法(Kruskal)，解决最小生成树————————选边构成图</h5><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/09/31e55d367066606e684379260dd49cea-image-20210209135733569-e6acec.png" alt="image-20210209135733569"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/09/854c5a8340fead419126e4015b8e3083-image-20210209135553567-17927f.png" alt="image-20210209135553567"></p>
<p>如何判断是否构成回路：</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/09/c7a569935c37f9352d4607236004224c-image-20210209135654760-2a090a.png" alt="image-20210209135654760"></p>
<h5 id="迪杰斯特拉算法-Dijkstral-的思路：解决一个顶点到其他顶点的最短路径"><a href="#迪杰斯特拉算法-Dijkstral-的思路：解决一个顶点到其他顶点的最短路径" class="headerlink" title="迪杰斯特拉算法(Dijkstral)的思路：解决一个顶点到其他顶点的最短路径"></a>迪杰斯特拉算法(Dijkstral)的思路：解决一个顶点到其他顶点的最短路径</h5><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/09/709bcdced66262965cfa5d4f18063b92-image-20210209131816314-692dab.png" alt="image-20210209131816314"></p>
<h5 id="弗洛伊德算法-Floyd-和迪杰斯特拉算法的区别：Floyd是每一个顶点都作为出发点进行求解"><a href="#弗洛伊德算法-Floyd-和迪杰斯特拉算法的区别：Floyd是每一个顶点都作为出发点进行求解" class="headerlink" title="弗洛伊德算法(Floyd)和迪杰斯特拉算法的区别：Floyd是每一个顶点都作为出发点进行求解"></a>弗洛伊德算法(Floyd)和迪杰斯特拉算法的区别：Floyd是每一个顶点都作为出发点进行求解</h5><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/08/f43f485520b29fcfc1cdffa00e99fa3d-image-20210208110816502-12a1f5.png" alt="image-20210208110816502"></p>
<h5 id="马踏棋盘（骑士周游）算法（DFS的应用）"><a href="#马踏棋盘（骑士周游）算法（DFS的应用）" class="headerlink" title="马踏棋盘（骑士周游）算法（DFS的应用）"></a>马踏棋盘（骑士周游）算法（DFS的应用）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用贪心算法优化后的选择下一步的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">traversalChessboard</span><span class="params">(<span class="keyword">int</span>[][] chessboard, <span class="keyword">int</span> row, <span class="keyword">int</span> column, <span class="keyword">int</span> step)</span> </span>&#123;</span><br><span class="line">    chessboard[row][column] = step;</span><br><span class="line">    visited[row * X + column] = <span class="keyword">true</span>; <span class="comment">//标记该位置已经访问</span></span><br><span class="line">    <span class="comment">//获取当前位置可以走的下一个位置的集合 </span></span><br><span class="line">    ArrayList&lt;Point&gt; ps = next(<span class="keyword">new</span> Point(column, row));</span><br><span class="line">    <span class="comment">//对ps进行排序,排序的规则就是对ps的所有的Point对象的下一步的位置的数目，进行非递减排序</span></span><br><span class="line">    sort(ps);</span><br><span class="line">    <span class="comment">//遍历 ps</span></span><br><span class="line">    <span class="keyword">while</span>(!ps.isEmpty()) &#123;</span><br><span class="line">        Point p = ps.remove(<span class="number">0</span>);<span class="comment">//取出下一个可以走的位置</span></span><br><span class="line">        <span class="comment">//判断该点是否已经访问过</span></span><br><span class="line">        <span class="keyword">if</span>(!visited[p.y * X + p.x]) &#123;<span class="comment">//说明还没有访问过</span></span><br><span class="line">            traversalChessboard(chessboard, p.y, p.x, step + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断马儿是否完成了任务，使用   step 和应该走的步数比较 ， </span></span><br><span class="line">    <span class="comment">//如果没有达到数量，则表示没有完成任务，将整个棋盘置0</span></span><br><span class="line">    <span class="comment">//说明: step &lt; X * Y  成立的情况有两种</span></span><br><span class="line">    <span class="comment">//1. 棋盘到目前位置,仍然没有走完</span></span><br><span class="line">    <span class="comment">//2. 棋盘处于一个回溯过程</span></span><br><span class="line">    <span class="keyword">if</span>(step &lt; X * Y &amp;&amp; !finished ) &#123;</span><br><span class="line">        chessboard[row][column] = <span class="number">0</span>;</span><br><span class="line">        visited[row * X + column] = <span class="keyword">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        finished = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>参考链接：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/pierceming/p/12778871.html">https://www.cnblogs.com/pierceming/p/12778871.html</a></p>
<h1 id="java数据结构与算法"><a href="#java数据结构与算法" class="headerlink" title="java数据结构与算法"></a>java数据结构与算法</h1><h5 id="稀疏数组"><a href="#稀疏数组" class="headerlink" title="稀疏数组"></a>稀疏数组</h5><ol>
<li><strong>稀疏编号</strong>为0的那一行里面保存的是关于这个棋盘的数据.<ul>
<li>11行</li>
<li>11列</li>
<li>里面有2个棋子.</li>
</ul>
</li>
<li>稀疏编号从1开始的那些行保存的是关于棋子的信息<ul>
<li>col 第几列</li>
<li>row 第几行</li>
<li>val 是哪种棋子</li>
</ul>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/02/19aa55cc41235586382a6e64db429264-image-20210202115245599-14546d.png" alt="image-20210202115245599"></p>
<h5 id="使用数组模拟队列"><a href="#使用数组模拟队列" class="headerlink" title="使用数组模拟队列"></a>使用数组模拟队列</h5><ul>
<li><p>front</p>
</li>
<li><p>rear</p>
</li>
<li><p>maxSize</p>
</li>
<li><p>[] arr</p>
</li>
</ul>
<h5 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h5><ul>
<li><p>pre</p>
</li>
<li><p>next</p>
</li>
</ul>
<h5 id="单向环形链表"><a href="#单向环形链表" class="headerlink" title="单向环形链表"></a>单向环形链表</h5><p>helper辅助节点</p>
<h5 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h5><ul>
<li>迷宫回溯</li>
<li>8皇后</li>
</ul>
<h5 id="排序："><a href="#排序：" class="headerlink" title="排序："></a>排序：</h5><ul>
<li>内部排序</li>
<li>外部排序</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/01/05/9aee5dfd8db1bacf044941d8617d3304-image-20210105125230545-9d9fe2.png" alt="image-20210105125230545"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/01/05/d1637fd38d908c3fd3efb4ffa3bf3492-image-20210105132642532-4ff40a.png" alt="image-20210105132642532"></p>
<ul>
<li>O(1)  普通代码</li>
<li>O(logn)  while</li>
<li>O(n)  for</li>
<li>O(nlogn)  for嵌套while</li>
</ul>
<h5 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 冒泡排序</span></span><br><span class="line"><span class="comment">     * flag作为辅助变量在原方法基础上进行优化，如果已经有序则退出方法即可</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                    flag = <span class="keyword">true</span>;</span><br><span class="line">                    temp = arr[j + <span class="number">1</span>];</span><br><span class="line">                    arr[j + <span class="number">1</span>] = arr[j];</span><br><span class="line">                    arr[j] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                flag = <span class="keyword">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 选择排序，每次选择数组中最小的那个</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">selectSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> minIndex = i;</span><br><span class="line">            <span class="keyword">int</span> min = arr[i];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (min &gt; arr[j]) &#123;</span><br><span class="line">                    min = arr[j];</span><br><span class="line">                    minIndex = j;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (minIndex != i) &#123;</span><br><span class="line">                arr[minIndex] = arr[i];</span><br><span class="line">                arr[i] = min;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 插入排序</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insertSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> insertVal = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> inserIndex = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            insertVal = arr[i];</span><br><span class="line">            inserIndex = i - <span class="number">1</span>;</span><br><span class="line">            <span class="comment">//给insertVal找到插入的位置</span></span><br><span class="line">            <span class="comment">//1.insertIndex &gt;= 0 保证在给insertVal 找插入位置，不越界</span></span><br><span class="line">            <span class="comment">//2.insertVal &lt; arr[insertIndex] 待插入的数，还没有找到插入位置就需要将 arr[insertIndex] 后移</span></span><br><span class="line">            <span class="keyword">while</span> (inserIndex &gt;= <span class="number">0</span> &amp;&amp; insertVal &lt; arr[inserIndex]) &#123;</span><br><span class="line">                arr[inserIndex + <span class="number">1</span>] = arr[inserIndex];</span><br><span class="line">                inserIndex--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 当退出while循环时，说明插入的位置找到, insertIndex + 1</span></span><br><span class="line">            <span class="keyword">if</span> (inserIndex + <span class="number">1</span> != i) &#123;</span><br><span class="line">                arr[inserIndex + <span class="number">1</span>] = insertVal;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="希尔排序（改进的插入排序），使用移位方式的速度比交换更快，移位方式就是对gap所在的组进行插入排序"><a href="#希尔排序（改进的插入排序），使用移位方式的速度比交换更快，移位方式就是对gap所在的组进行插入排序" class="headerlink" title="希尔排序（改进的插入排序），使用移位方式的速度比交换更快，移位方式就是对gap所在的组进行插入排序"></a>希尔排序（改进的插入排序），使用移位方式的速度比交换更快，移位方式就是对gap所在的组进行插入排序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 希尔排序（改进的插入排序），交换数据的方式使用插入排序的思想即移位法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shellSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> gap = arr.length / <span class="number">2</span>; gap &gt; <span class="number">0</span>; gap /= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = gap; i &lt; arr.length; i++) &#123;</span><br><span class="line">                <span class="keyword">int</span> j = i;</span><br><span class="line">                <span class="keyword">int</span> temp = arr[j];</span><br><span class="line">                <span class="keyword">if</span> (arr[j] &lt; arr[j - gap]) &#123;</span><br><span class="line">                    <span class="keyword">while</span> (j - gap &gt;= <span class="number">0</span> &amp;&amp; temp &lt; arr[j - gap]) &#123;</span><br><span class="line">                        arr[j] = arr[j - gap];</span><br><span class="line">                        j -= gap;</span><br><span class="line">                    &#125;</span><br><span class="line">                    arr[j] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="快速排序（改进的冒泡排序）"><a href="#快速排序（改进的冒泡排序）" class="headerlink" title="快速排序（改进的冒泡排序）"></a>快速排序（改进的冒泡排序）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 快速排序，选定一个pivot，比pivot小的放左边、大的放右边。然后依次递归</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> left</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> right</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> l = left;</span><br><span class="line">        <span class="keyword">int</span> r = right;</span><br><span class="line">        <span class="keyword">int</span> pivot = arr[(left + right) / <span class="number">2</span>];   <span class="comment">//中轴值</span></span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">            <span class="keyword">while</span> (arr[l] &lt; pivot) &#123;<span class="comment">//左边一直找，找到大于等于pivot的值退出</span></span><br><span class="line">                l += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (arr[r] &gt; pivot) &#123;</span><br><span class="line">                r -= <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (l &gt;= r) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            temp = arr[l];</span><br><span class="line">            arr[l] = arr[r];</span><br><span class="line">            arr[r] = temp;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//下面两个if是为了防止左右数字相同出现死循环</span></span><br><span class="line">            <span class="keyword">if</span> (arr[l] == pivot) &#123;</span><br><span class="line">                r -= <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (arr[r] == pivot) &#123;</span><br><span class="line">                l += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (l == r) &#123;<span class="comment">//如果l==r，必须l++,r--，否则会栈溢出</span></span><br><span class="line">            l += <span class="number">1</span>;</span><br><span class="line">            r -= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (left &lt; r) &#123;</span><br><span class="line">            quickSort(arr, left, r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (right &gt; l) &#123;</span><br><span class="line">            quickSort(arr, l, right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/01/08/42b2420158e74aee534bbceda875fcd5-image-20210108185907749-dc3476.png" alt="image-20210108185907749"></p>
<h5 id="归并排序（分而治之）"><a href="#归并排序（分而治之）" class="headerlink" title="归并排序（分而治之）"></a>归并排序（分而治之）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分+合</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span>[] temp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">int</span> mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">            <span class="comment">//向左递归分解</span></span><br><span class="line">            mergeSort(arr, left, mid, temp);</span><br><span class="line">            <span class="comment">//向右递归分解</span></span><br><span class="line">            mergeSort(arr, mid + <span class="number">1</span>, right, temp);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//合</span></span><br><span class="line">            merge(arr, left, mid, right, temp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 合并的方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr   排序的原始数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> left  左边有序序列的初始索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> mid   中间索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> right 右边索引</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> temp  做中转的数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> left, <span class="keyword">int</span> mid, <span class="keyword">int</span> right, <span class="keyword">int</span>[] temp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = left;</span><br><span class="line">        <span class="keyword">int</span> j = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//一、先把左右两边有序的数据按照规则填充到temp数组</span></span><br><span class="line">        <span class="comment">//直到左右两边的有序序列有一边处理完毕为止</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt;= mid &amp;&amp; j &lt;= right) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &lt; arr[j]) &#123;</span><br><span class="line">                temp[t] = arr[i];</span><br><span class="line">                t += <span class="number">1</span>;</span><br><span class="line">                i += <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                temp[t] = arr[j];</span><br><span class="line">                t += <span class="number">1</span>;</span><br><span class="line">                j += <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//二、把有剩余数据的一边的数据全部填充到temp中</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt;= mid) &#123;</span><br><span class="line">            temp[t] = arr[i];</span><br><span class="line">            t += <span class="number">1</span>;</span><br><span class="line">            i += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (j &lt;= right) &#123;</span><br><span class="line">            temp[t] = arr[j];</span><br><span class="line">            t += <span class="number">1</span>;</span><br><span class="line">            j += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//三、将temp数组的元素拷贝到arr中，这是一个逐步增加的过程:刚开始只拷贝2个数，后来4个，再后		   //来8个，最后变成arr.length的一半</span></span><br><span class="line">        t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> tempLeft = left;</span><br><span class="line">        <span class="keyword">while</span> (tempLeft &lt;= right) &#123;</span><br><span class="line">            arr[tempLeft] = temp[t];</span><br><span class="line">            t += <span class="number">1</span>;</span><br><span class="line">            tempLeft += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/01/08/001e1697d6a614a85759dd5a715a7a30-image-20210108190806243-5a840a.png" alt="image-20210108190806243"></p>
<h5 id="基数排序（桶排序）"><a href="#基数排序（桶排序）" class="headerlink" title="基数排序（桶排序）"></a>基数排序（桶排序）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 基数排序，桶排序</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">radixSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//得到数组中最大的数共有几位，存入maxLength</span></span><br><span class="line">        <span class="keyword">int</span> max = arr[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &gt; max) &#123;</span><br><span class="line">                max = arr[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> maxLength = (max + <span class="string">&quot;&quot;</span>).length();<span class="comment">//把int型的max转成字符串求长度</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[][] bucket = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>][arr.length];</span><br><span class="line">        <span class="keyword">int</span>[] bucketElementCounts = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];<span class="comment">//存每个桶中有多少个元素</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, n = <span class="number">1</span>; i &lt; maxLength; i++, n *= <span class="number">10</span>) &#123;<span class="comment">//处理放桶这个步骤的循环次数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">                <span class="keyword">int</span> digitOfElement = arr[j] / n % <span class="number">10</span>;</span><br><span class="line">                bucket[digitOfElement][bucketElementCounts[digitOfElement]] = arr[j];</span><br><span class="line">                bucketElementCounts[digitOfElement]++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; bucketElementCounts.length; k++) &#123;</span><br><span class="line"><span class="comment">//                if (bucketElementCounts[k] != 0) &#123;</span></span><br><span class="line"><span class="comment">//                    for (int l = 0; l &lt; bucketElementCounts[k]; l++) &#123;</span></span><br><span class="line"><span class="comment">//                        arr[index] = bucket[k][l];</span></span><br><span class="line"><span class="comment">//                        index++;</span></span><br><span class="line"><span class="comment">//                    &#125;</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line"><span class="comment">//                bucketElementCounts[k] = 0;</span></span><br><span class="line">                <span class="keyword">int</span> l = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>(bucketElementCounts[k] != <span class="number">0</span> &amp;&amp; l &lt; bucketElementCounts[k])&#123;</span><br><span class="line">                    arr[index] = bucket[k][l];</span><br><span class="line">                    l++;</span><br><span class="line">                    index++;</span><br><span class="line">                &#125;</span><br><span class="line">                bucketElementCounts[k] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="二分查找的递归写法（建立在有序的前提下）"><a href="#二分查找的递归写法（建立在有序的前提下）" class="headerlink" title="二分查找的递归写法（建立在有序的前提下）"></a>二分查找的递归写法（建立在有序的前提下）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 二分查找算法</span></span><br><span class="line"><span class="comment"> * 如果有多个数相同，则放入List返回</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> left</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> right</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> findVal</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 如果找到就返回下标，否则返回-1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> findVal)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> midVal = arr[mid];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当left &gt; right 时，说明并没有找到</span></span><br><span class="line">    <span class="keyword">if</span> (left &gt; right) &#123;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (findVal &gt; midVal) &#123;<span class="comment">//向右递归</span></span><br><span class="line">        <span class="keyword">return</span> binarySearch(arr, mid + <span class="number">1</span>, right, findVal);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (findVal &lt; midVal) &#123;<span class="comment">//向左递归</span></span><br><span class="line">        <span class="keyword">return</span> binarySearch(arr, left, mid + <span class="number">1</span>, findVal);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mid;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="插值查找（基于二分查找的思路，在数据量较大时使用较好）"><a href="#插值查找（基于二分查找的思路，在数据量较大时使用较好）" class="headerlink" title="插值查找（基于二分查找的思路，在数据量较大时使用较好）"></a>插值查找（基于二分查找的思路，在数据量较大时使用较好）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">把二分查找的 mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">换成插值查找的改进公式(自适应，数学思想)：</span><br><span class="line">    mid = left + (right - left) * (findVal - arr[left]) / (arr[right] - arr[left]);</span><br></pre></td></tr></table></figure>

<h5 id="斐波那契查找（黄金分割查找）"><a href="#斐波那契查找（黄金分割查找）" class="headerlink" title="斐波那契查找（黄金分割查找）"></a>斐波那契查找（黄金分割查找）</h5><h5 id="哈希表"><a href="#哈希表" class="headerlink" title="哈希表"></a>哈希表</h5><h5 id="二叉树（前序、中序、后序遍历-前序、中序、后序查找）"><a href="#二叉树（前序、中序、后序遍历-前序、中序、后序查找）" class="headerlink" title="二叉树（前序、中序、后序遍历 + 前序、中序、后序查找）"></a>二叉树（前序、中序、后序遍历 + 前序、中序、后序查找）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> HeroNode root;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoot</span><span class="params">(HeroNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.root = root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//树的前序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preOrder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.root != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.root.preOrder();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;当前二叉树为空无法遍历&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//树的中序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">infixOrder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.root != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.root.infixOrder();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;当前二叉树为空无法遍历&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//树的后序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">suffixOrder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.root != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.root.suffixOrder();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;当前二叉树为空无法遍历&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeroNode</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> no;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> HeroNode left;</span><br><span class="line">    <span class="keyword">private</span> HeroNode right;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HeroNode</span><span class="params">(<span class="keyword">int</span> no, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.no = no;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> no;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNo</span><span class="params">(<span class="keyword">int</span> no)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.no = no;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HeroNode <span class="title">getLeft</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLeft</span><span class="params">(HeroNode left)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.left = left;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> HeroNode <span class="title">getRight</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRight</span><span class="params">(HeroNode right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;HeroNode&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;no=&quot;</span> + no +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//前序遍历方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preOrder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.left != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.left.preOrder();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.right.preOrder();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//中序遍历方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">infixOrder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.left != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.left.preOrder();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.right.preOrder();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//后序遍历方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">suffixOrder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.left != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.left.preOrder();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.right.preOrder();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="顺序存储二叉树（用数组存储）"><a href="#顺序存储二叉树（用数组存储）" class="headerlink" title="顺序存储二叉树（用数组存储）"></a>顺序存储二叉树（用数组存储）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> tree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrBinaryTreeDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;;</span><br><span class="line">        ArrBinaryTree arrBinaryTree = <span class="keyword">new</span> ArrBinaryTree(arr);</span><br><span class="line">        arrBinaryTree.preOrder(<span class="number">0</span>);<span class="comment">//1,2,4,5,3,6,7</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArrBinaryTree</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] arr;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArrBinaryTree</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.arr = arr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重载preOrder</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preOrder</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.preOrder(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 顺序存储二叉树的前序遍历</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index 数组的下标</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preOrder</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (arr == <span class="keyword">null</span> || arr.length == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;数组为空，不能前序遍历&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(arr[index]);</span><br><span class="line">        <span class="comment">//向左递归遍历</span></span><br><span class="line">        <span class="keyword">if</span> ((index * <span class="number">2</span> + <span class="number">1</span>) &lt; arr.length) &#123;</span><br><span class="line">            preOrder(index * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ((index * <span class="number">2</span> + <span class="number">2</span>) &lt; arr.length) &#123;</span><br><span class="line">            preOrder(index * <span class="number">2</span> + <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="线索化二叉树（把结点的前缀和后缀信息也补充上的二叉树）"><a href="#线索化二叉树（把结点的前缀和后缀信息也补充上的二叉树）" class="headerlink" title="线索化二叉树（把结点的前缀和后缀信息也补充上的二叉树）"></a>线索化二叉树（把结点的前缀和后缀信息也补充上的二叉树）</h5><h5 id="堆排序（升序大顶堆，降序小顶堆）"><a href="#堆排序（升序大顶堆，降序小顶堆）" class="headerlink" title="堆排序（升序大顶堆，降序小顶堆）"></a>堆排序（升序大顶堆，降序小顶堆）</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> tree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapSort</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        heapSort(arr);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//1、构建大顶堆</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = arr.length / <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            adjustHeap(arr, i, arr.length);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2、交换堆顶元素和末尾元素+调整堆结构</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = arr.length - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">            temp = arr[j];</span><br><span class="line">            arr[j] = arr[<span class="number">0</span>];</span><br><span class="line">            arr[<span class="number">0</span>] = temp;</span><br><span class="line">            adjustHeap(arr, <span class="number">0</span>, j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将非叶子结点i对应的树调整为大顶堆</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> i</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> length</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">adjustHeap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> i, <span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = arr[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = i * <span class="number">2</span> + <span class="number">1</span>; k &lt; length; k = k * <span class="number">2</span> + <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[k] &lt; arr[k + <span class="number">1</span>] &amp;&amp; k + <span class="number">1</span> &lt; length) &#123;</span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (arr[k] &gt; temp) &#123;</span><br><span class="line">                arr[i] = arr[k];</span><br><span class="line">                i = k;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;<span class="comment">//左子树会在sort里面的遍历考虑到，这里是可以不考虑的</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[i] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="赫夫曼树的建立"><a href="#赫夫曼树的建立" class="headerlink" title="赫夫曼树的建立"></a>赫夫曼树的建立</h5><p>//1、先对所有节点排序从小到大排序，每一个节点看成一棵树<br>//2、取出根节点权值最小的两棵树组成一棵新的二叉树，权值为两棵子树权值之和<br>//3、重复2步骤直到所有节点都使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、从小到大排序，每一个节点看成一棵树</span></span><br><span class="line"><span class="comment">//2、取出根节点权值最小的两棵树组成一棵新的二叉树，权值为两棵子树权值之和</span></span><br><span class="line"><span class="comment">//3、重复2步骤直到所有节点都使用</span></span><br><span class="line"><span class="comment">//wpl最小的树叫赫夫曼树</span></span><br><span class="line"><span class="keyword">package</span> huffmantree;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HuffmanTree</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> arr[] = &#123;<span class="number">13</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">29</span>, <span class="number">6</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        Node root = createHuffmanTree(arr);</span><br><span class="line">        preOrder(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title">createHuffmanTree</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//第一步，遍历数组arr将每个元素变成Node放入ArrayList</span></span><br><span class="line">        List&lt;Node&gt; nodeList = <span class="keyword">new</span> ArrayList&lt;Node&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> value : arr) &#123;</span><br><span class="line">            nodeList.add(<span class="keyword">new</span> Node(value));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (nodeList.size() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//对nodeList排序</span></span><br><span class="line">            Collections.sort(nodeList);</span><br><span class="line">            <span class="comment">//取出根节点最小的两个两棵二叉树构建新二叉树</span></span><br><span class="line">            Node leftNode = nodeList.get(<span class="number">0</span>);</span><br><span class="line">            Node rightNode = nodeList.get(<span class="number">1</span>);</span><br><span class="line">            Node parent = <span class="keyword">new</span> Node(leftNode.value + rightNode.value);</span><br><span class="line">            parent.left = leftNode;</span><br><span class="line">            parent.right = rightNode;</span><br><span class="line">            <span class="comment">//处理nodeList</span></span><br><span class="line">            nodeList.remove(leftNode);</span><br><span class="line">            nodeList.remove(rightNode);</span><br><span class="line">            nodeList.add(parent);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nodeList.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">preOrder</span><span class="params">(Node root)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            root.preOrder();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;空树不能遍历&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结点类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Node</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    Node left;</span><br><span class="line">    Node right;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//前序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.left.preOrder();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.right.preOrder();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写toString</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Node&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;value=&quot;</span> + value +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//继承比较接口，实现Collections.sort的比较</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Node o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.value - o.value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="赫夫曼编码"><a href="#赫夫曼编码" class="headerlink" title="赫夫曼编码"></a>赫夫曼编码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> huffmancode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HuffmanCode</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//测试压缩文件</span></span><br><span class="line"><span class="comment">//		String srcFile = &quot;d://Uninstall.xml&quot;;</span></span><br><span class="line"><span class="comment">//		String dstFile = &quot;d://Uninstall.zip&quot;;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//		zipFile(srcFile, dstFile);</span></span><br><span class="line"><span class="comment">//		System.out.println(&quot;压缩文件ok~~&quot;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//测试解压文件</span></span><br><span class="line">        String zipFile = <span class="string">&quot;d://Uninstall.zip&quot;</span>;</span><br><span class="line">        String dstFile = <span class="string">&quot;d://Uninstall2.xml&quot;</span>;</span><br><span class="line">        unZipFile(zipFile, dstFile);</span><br><span class="line">        System.out.println(<span class="string">&quot;解压成功!&quot;</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		String content = &quot;i like like like java do you like a java&quot;;</span></span><br><span class="line"><span class="comment">		byte[] contentBytes = content.getBytes();</span></span><br><span class="line"><span class="comment">		System.out.println(contentBytes.length); //40</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		byte[] huffmanCodesBytes= huffmanZip(contentBytes);</span></span><br><span class="line"><span class="comment">		System.out.println(&quot;压缩后的结果是:&quot; + Arrays.toString(huffmanCodesBytes) + &quot; 长度= &quot; + huffmanCodesBytes.length);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		//测试一把byteToBitString方法</span></span><br><span class="line"><span class="comment">		//System.out.println(byteToBitString((byte)1));</span></span><br><span class="line"><span class="comment">		byte[] sourceBytes = decode(huffmanCodes, huffmanCodesBytes);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		System.out.println(&quot;原来的字符串=&quot; + new String(sourceBytes)); // &quot;i like like like java do you like a java&quot;</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//如何将 数据进行解压(解码)</span></span><br><span class="line">        <span class="comment">//分步过程</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		List&lt;Node&gt; nodes = getNodes(contentBytes);</span></span><br><span class="line"><span class="comment">		System.out.println(&quot;nodes=&quot; + nodes);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		//测试一把，创建的赫夫曼树</span></span><br><span class="line"><span class="comment">		System.out.println(&quot;赫夫曼树&quot;);</span></span><br><span class="line"><span class="comment">		Node huffmanTreeRoot = createHuffmanTree(nodes);</span></span><br><span class="line"><span class="comment">		System.out.println(&quot;前序遍历&quot;);</span></span><br><span class="line"><span class="comment">		huffmanTreeRoot.preOrder();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		//测试一把是否生成了对应的赫夫曼编码</span></span><br><span class="line"><span class="comment">		Map&lt;Byte, String&gt; huffmanCodes = getCodes(huffmanTreeRoot);</span></span><br><span class="line"><span class="comment">		System.out.println(&quot;~生成的赫夫曼编码表= &quot; + huffmanCodes);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		//测试</span></span><br><span class="line"><span class="comment">		byte[] huffmanCodeBytes = zip(contentBytes, huffmanCodes);</span></span><br><span class="line"><span class="comment">		System.out.println(&quot;huffmanCodeBytes=&quot; + Arrays.toString(huffmanCodeBytes));//17</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		//发送huffmanCodeBytes 数组 */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//编写一个方法，完成对压缩文件的解压</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> zipFile 准备解压的文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dstFile 将文件解压到哪个路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unZipFile</span><span class="params">(String zipFile, String dstFile)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//定义文件输入流</span></span><br><span class="line">        InputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//定义一个对象输入流</span></span><br><span class="line">        ObjectInputStream ois = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//定义文件的输出流</span></span><br><span class="line">        OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//创建文件输入流</span></span><br><span class="line">            is = <span class="keyword">new</span> FileInputStream(zipFile);</span><br><span class="line">            <span class="comment">//创建一个和  is关联的对象输入流</span></span><br><span class="line">            ois = <span class="keyword">new</span> ObjectInputStream(is);</span><br><span class="line">            <span class="comment">//读取byte数组  huffmanBytes</span></span><br><span class="line">            <span class="keyword">byte</span>[] huffmanBytes = (<span class="keyword">byte</span>[]) ois.readObject();</span><br><span class="line">            <span class="comment">//读取赫夫曼编码表</span></span><br><span class="line">            Map&lt;Byte, String&gt; huffmanCodes = (Map&lt;Byte, String&gt;) ois.readObject();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//解码</span></span><br><span class="line">            <span class="keyword">byte</span>[] bytes = decode(huffmanCodes, huffmanBytes);</span><br><span class="line">            <span class="comment">//将bytes 数组写入到目标文件</span></span><br><span class="line">            os = <span class="keyword">new</span> FileOutputStream(dstFile);</span><br><span class="line">            <span class="comment">//写数据到 dstFile 文件</span></span><br><span class="line">            os.write(bytes);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                os.close();</span><br><span class="line">                ois.close();</span><br><span class="line">                is.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e2) &#123;</span><br><span class="line">                <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">                System.out.println(e2.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//编写方法，将一个文件进行压缩</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> srcFile 你传入的希望压缩的文件的全路径</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dstFile 我们压缩后将压缩文件放到哪个目录</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">zipFile</span><span class="params">(String srcFile, String dstFile)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建输出流</span></span><br><span class="line">        OutputStream os = <span class="keyword">null</span>;</span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//创建文件的输入流</span></span><br><span class="line">        FileInputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//创建文件的输入流</span></span><br><span class="line">            is = <span class="keyword">new</span> FileInputStream(srcFile);</span><br><span class="line">            <span class="comment">//创建一个和源文件大小一样的byte[]</span></span><br><span class="line">            <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[is.available()];</span><br><span class="line">            <span class="comment">//读取文件</span></span><br><span class="line">            is.read(b);</span><br><span class="line">            <span class="comment">//直接对源文件压缩</span></span><br><span class="line">            <span class="keyword">byte</span>[] huffmanBytes = huffmanZip(b);</span><br><span class="line">            <span class="comment">//创建文件的输出流, 存放压缩文件</span></span><br><span class="line">            os = <span class="keyword">new</span> FileOutputStream(dstFile);</span><br><span class="line">            <span class="comment">//创建一个和文件输出流关联的ObjectOutputStream</span></span><br><span class="line">            oos = <span class="keyword">new</span> ObjectOutputStream(os);</span><br><span class="line">            <span class="comment">//把 赫夫曼编码后的字节数组写入压缩文件</span></span><br><span class="line">            oos.writeObject(huffmanBytes); <span class="comment">//我们是把</span></span><br><span class="line">            <span class="comment">//这里我们以对象流的方式写入 赫夫曼编码，是为了以后我们恢复源文件时使用</span></span><br><span class="line">            <span class="comment">//注意一定要把赫夫曼编码 写入压缩文件</span></span><br><span class="line">            oos.writeObject(huffmanCodes);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                is.close();</span><br><span class="line">                oos.close();</span><br><span class="line">                os.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">                System.out.println(e.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//完成数据的解压</span></span><br><span class="line">    <span class="comment">//思路</span></span><br><span class="line">    <span class="comment">//1. 将huffmanCodeBytes [-88, -65, -56, -65, -56, -65, -55, 77, -57, 6, -24, -14, -117, -4, -60, -90, 28]</span></span><br><span class="line">    <span class="comment">//   重写先转成 赫夫曼编码对应的二进制的字符串 &quot;1010100010111...&quot;</span></span><br><span class="line">    <span class="comment">//2.  赫夫曼编码对应的二进制的字符串 &quot;1010100010111...&quot; =》 对照 赫夫曼编码  =》 &quot;i like like like java do you like a java&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//编写一个方法，完成对压缩数据的解码</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> huffmanCodes 赫夫曼编码表 map</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> huffmanBytes 赫夫曼编码得到的字节数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 就是原来的字符串对应的数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] decode(Map&lt;Byte, String&gt; huffmanCodes, <span class="keyword">byte</span>[] huffmanBytes) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. 先得到 huffmanBytes 对应的 二进制的字符串 ， 形式 1010100010111...</span></span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="comment">//将byte数组转成二进制的字符串</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; huffmanBytes.length; i++) &#123;</span><br><span class="line">            <span class="keyword">byte</span> b = huffmanBytes[i];</span><br><span class="line">            <span class="comment">//判断是不是最后一个字节</span></span><br><span class="line">            <span class="keyword">boolean</span> flag = (i == huffmanBytes.length - <span class="number">1</span>);</span><br><span class="line">            stringBuilder.append(byteToBitString(!flag, b));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//把字符串安装指定的赫夫曼编码进行解码</span></span><br><span class="line">        <span class="comment">//把赫夫曼编码表进行调换，因为反向查询 a-&gt;100 100-&gt;a</span></span><br><span class="line">        Map&lt;String, Byte&gt; map = <span class="keyword">new</span> HashMap&lt;String, Byte&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;Byte, String&gt; entry : huffmanCodes.entrySet()) &#123;</span><br><span class="line">            map.put(entry.getValue(), entry.getKey());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建要给集合，存放byte</span></span><br><span class="line">        List&lt;Byte&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">//i 可以理解成就是索引,扫描 stringBuilder</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; stringBuilder.length(); ) &#123;</span><br><span class="line">            <span class="keyword">int</span> count = <span class="number">1</span>; <span class="comment">// 小的计数器</span></span><br><span class="line">            <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">            Byte b = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (flag) &#123;</span><br><span class="line">                <span class="comment">//1010100010111...</span></span><br><span class="line">                <span class="comment">//递增的取出 key 1</span></span><br><span class="line">                String key = stringBuilder.substring(i, i + count);<span class="comment">//i 不动，让count移动，指定匹配到一个字符</span></span><br><span class="line">                b = map.get(key);</span><br><span class="line">                <span class="keyword">if</span> (b == <span class="keyword">null</span>) &#123;<span class="comment">//说明没有匹配到</span></span><br><span class="line">                    count++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//匹配到</span></span><br><span class="line">                    flag = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            list.add(b);</span><br><span class="line">            i += count;<span class="comment">//i 直接移动到 count</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//当for循环结束后，我们list中就存放了所有的字符  &quot;i like like like java do you like a java&quot;</span></span><br><span class="line">        <span class="comment">//把list 中的数据放入到byte[] 并返回</span></span><br><span class="line">        <span class="keyword">byte</span> b[] = <span class="keyword">new</span> <span class="keyword">byte</span>[list.size()];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; b.length; i++) &#123;</span><br><span class="line">            b[i] = list.get(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将一个byte 转成一个二进制的字符串, 如果看不懂，可以参考我讲的Java基础 二进制的原码，反码，补码</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b    传入的 byte</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> flag 标志是否需要补高位如果是true ，表示需要补高位，如果是false表示不补, 如果是最后一个字节，无需补高位</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是该b 对应的二进制的字符串，（注意是按补码返回）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">byteToBitString</span><span class="params">(<span class="keyword">boolean</span> flag, <span class="keyword">byte</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//使用变量保存 b</span></span><br><span class="line">        <span class="keyword">int</span> temp = b; <span class="comment">//将 b 转成 int</span></span><br><span class="line">        <span class="comment">//如果是正数我们还存在补高位</span></span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            temp |= <span class="number">256</span>; <span class="comment">//按位与 256  1 0000 0000  | 0000 0001 =&gt; 1 0000 0001</span></span><br><span class="line">        &#125;</span><br><span class="line">        String str = Integer.toBinaryString(temp); <span class="comment">//返回的是temp对应的二进制的补码</span></span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="keyword">return</span> str.substring(str.length() - <span class="number">8</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> str;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用一个方法，将前面的方法封装起来，便于我们的调用.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bytes 原始的字符串对应的字节数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 是经过 赫夫曼编码处理后的字节数组(压缩后的数组)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] huffmanZip(<span class="keyword">byte</span>[] bytes) &#123;</span><br><span class="line">        List&lt;Node&gt; nodes = getNodes(bytes);</span><br><span class="line">        <span class="comment">//根据 nodes 创建的赫夫曼树</span></span><br><span class="line">        Node huffmanTreeRoot = createHuffmanTree(nodes);</span><br><span class="line">        <span class="comment">//对应的赫夫曼编码(根据 赫夫曼树)</span></span><br><span class="line">        Map&lt;Byte, String&gt; huffmanCodes = getCodes(huffmanTreeRoot);</span><br><span class="line">        <span class="comment">//根据生成的赫夫曼编码，压缩得到压缩后的赫夫曼编码字节数组</span></span><br><span class="line">        <span class="keyword">byte</span>[] huffmanCodeBytes = zip(bytes, huffmanCodes);</span><br><span class="line">        <span class="keyword">return</span> huffmanCodeBytes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//编写一个方法，将字符串对应的byte[] 数组，通过生成的赫夫曼编码表，返回一个赫夫曼编码 压缩后的byte[]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bytes        这时原始的字符串对应的 byte[]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> huffmanCodes 生成的赫夫曼编码map</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回赫夫曼编码处理后的 byte[]</span></span><br><span class="line"><span class="comment">     * 举例： String content = &quot;i like like like java do you like a java&quot;; =》 byte[] contentBytes = content.getBytes();</span></span><br><span class="line"><span class="comment">     * 返回的是 字符串 &quot;1010100010111111110010001011111111001000101111111100100101001101110001110000011011101000111100101000101111111100110001001010011011100&quot;</span></span><br><span class="line"><span class="comment">     * =&gt; 对应的 byte[] huffmanCodeBytes  ，即 8位对应一个 byte,放入到 huffmanCodeBytes</span></span><br><span class="line"><span class="comment">     * huffmanCodeBytes[0] =  10101000(补码) =&gt; byte  [推导  10101000=&gt; 10101000 - 1 =&gt; 10100111(反码)=&gt; 11011000= -88 ]</span></span><br><span class="line"><span class="comment">     * huffmanCodeBytes[1] = -88</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] zip(<span class="keyword">byte</span>[] bytes, Map&lt;Byte, String&gt; huffmanCodes) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.利用 huffmanCodes 将  bytes 转成  赫夫曼编码对应的字符串</span></span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="comment">//遍历bytes 数组</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">byte</span> b : bytes) &#123;</span><br><span class="line">            stringBuilder.append(huffmanCodes.get(b));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//System.out.println(&quot;测试 stringBuilder~~~=&quot; + stringBuilder.toString());</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//将 &quot;1010100010111111110...&quot; 转成 byte[]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//统计返回  byte[] huffmanCodeBytes 长度</span></span><br><span class="line">        <span class="comment">//一句话 int len = (stringBuilder.length() + 7) / 8;</span></span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">if</span> (stringBuilder.length() % <span class="number">8</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            len = stringBuilder.length() / <span class="number">8</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            len = stringBuilder.length() / <span class="number">8</span> + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//创建 存储压缩后的 byte数组</span></span><br><span class="line">        <span class="keyword">byte</span>[] huffmanCodeBytes = <span class="keyword">new</span> <span class="keyword">byte</span>[len];</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;<span class="comment">//记录是第几个byte</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; stringBuilder.length(); i += <span class="number">8</span>) &#123; <span class="comment">//因为是每8位对应一个byte,所以步长 +8</span></span><br><span class="line">            String strByte;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">8</span> &gt; stringBuilder.length()) &#123;<span class="comment">//不够8位</span></span><br><span class="line">                strByte = stringBuilder.substring(i);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                strByte = stringBuilder.substring(i, i + <span class="number">8</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//将strByte 转成一个byte,放入到 huffmanCodeBytes</span></span><br><span class="line">            huffmanCodeBytes[index] = (<span class="keyword">byte</span>) Integer.parseInt(strByte, <span class="number">2</span>);</span><br><span class="line">            index++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> huffmanCodeBytes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//生成赫夫曼树对应的赫夫曼编码</span></span><br><span class="line">    <span class="comment">//思路:</span></span><br><span class="line">    <span class="comment">//1. 将赫夫曼编码表存放在 Map&lt;Byte,String&gt; 形式</span></span><br><span class="line">    <span class="comment">//   生成的赫夫曼编码表&#123;32=01, 97=100, 100=11000, 117=11001, 101=1110, 118=11011, 105=101, 121=11010, 106=0010, 107=1111, 108=000, 111=0011&#125;</span></span><br><span class="line">    <span class="keyword">static</span> Map&lt;Byte, String&gt; huffmanCodes = <span class="keyword">new</span> HashMap&lt;Byte, String&gt;();</span><br><span class="line">    <span class="comment">//2. 在生成赫夫曼编码表示，需要去拼接路径, 定义一个StringBuilder 存储某个叶子结点的路径</span></span><br><span class="line">    <span class="keyword">static</span> StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//为了调用方便，我们重载 getCodes</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Byte, String&gt; <span class="title">getCodes</span><span class="params">(Node root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//处理root的左子树</span></span><br><span class="line">        getCodes(root.left, <span class="string">&quot;0&quot;</span>, stringBuilder);</span><br><span class="line">        <span class="comment">//处理root的右子树</span></span><br><span class="line">        getCodes(root.right, <span class="string">&quot;1&quot;</span>, stringBuilder);</span><br><span class="line">        <span class="keyword">return</span> huffmanCodes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 功能：将传入的node结点的所有叶子结点的赫夫曼编码得到，并放入到huffmanCodes集合</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> node          传入结点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code          路径： 左子结点是 0, 右子结点 1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> stringBuilder 用于拼接路径</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getCodes</span><span class="params">(Node node, String code, StringBuilder stringBuilder)</span> </span>&#123;</span><br><span class="line">        StringBuilder stringBuilder2 = <span class="keyword">new</span> StringBuilder(stringBuilder);</span><br><span class="line">        <span class="comment">//将code 加入到 stringBuilder2</span></span><br><span class="line">        stringBuilder2.append(code);</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="keyword">null</span>) &#123; <span class="comment">//如果node == null不处理</span></span><br><span class="line">            <span class="comment">//判断当前node 是叶子结点还是非叶子结点</span></span><br><span class="line">            <span class="keyword">if</span> (node.data == <span class="keyword">null</span>) &#123; <span class="comment">//非叶子结点</span></span><br><span class="line">                <span class="comment">//递归处理</span></span><br><span class="line">                <span class="comment">//向左递归</span></span><br><span class="line">                getCodes(node.left, <span class="string">&quot;0&quot;</span>, stringBuilder2);</span><br><span class="line">                <span class="comment">//向右递归</span></span><br><span class="line">                getCodes(node.right, <span class="string">&quot;1&quot;</span>, stringBuilder2);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//说明是一个叶子结点</span></span><br><span class="line">                <span class="comment">//就表示找到某个叶子结点的最后</span></span><br><span class="line">                huffmanCodes.put(node.data, stringBuilder2.toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//前序遍历的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">preOrder</span><span class="params">(Node root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root != <span class="keyword">null</span>) &#123;</span><br><span class="line">            root.preOrder();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;赫夫曼树为空&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bytes 接收字节数组</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回的就是 List 形式   [Node[date=97 ,weight = 5], Node[]date=32,weight = 9]......],</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;Node&gt; <span class="title">getNodes</span><span class="params">(<span class="keyword">byte</span>[] bytes)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1创建一个ArrayList</span></span><br><span class="line">        ArrayList&lt;Node&gt; nodes = <span class="keyword">new</span> ArrayList&lt;Node&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//遍历 bytes , 统计 每一个byte出现的次数-&gt;map[key,value]</span></span><br><span class="line">        Map&lt;Byte, Integer&gt; counts = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">byte</span> b : bytes) &#123;</span><br><span class="line">            Integer count = counts.get(b);</span><br><span class="line">            <span class="keyword">if</span> (count == <span class="keyword">null</span>) &#123; <span class="comment">// Map还没有这个字符数据,第一次</span></span><br><span class="line">                counts.put(b, <span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                counts.put(b, count + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//把每一个键值对转成一个Node 对象，并加入到nodes集合</span></span><br><span class="line">        <span class="comment">//遍历map</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;Byte, Integer&gt; entry : counts.entrySet()) &#123;</span><br><span class="line">            nodes.add(<span class="keyword">new</span> Node(entry.getKey(), entry.getValue()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nodes;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//可以通过List 创建对应的赫夫曼树</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Node <span class="title">createHuffmanTree</span><span class="params">(List&lt;Node&gt; nodes)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (nodes.size() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//排序, 从小到大</span></span><br><span class="line">            Collections.sort(nodes);</span><br><span class="line">            <span class="comment">//取出第一颗最小的二叉树</span></span><br><span class="line">            Node leftNode = nodes.get(<span class="number">0</span>);</span><br><span class="line">            <span class="comment">//取出第二颗最小的二叉树</span></span><br><span class="line">            Node rightNode = nodes.get(<span class="number">1</span>);</span><br><span class="line">            <span class="comment">//创建一颗新的二叉树,它的根节点 没有data, 只有权值</span></span><br><span class="line">            Node parent = <span class="keyword">new</span> Node(<span class="keyword">null</span>, leftNode.weight + rightNode.weight);</span><br><span class="line">            parent.left = leftNode;</span><br><span class="line">            parent.right = rightNode;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//将已经处理的两颗二叉树从nodes删除</span></span><br><span class="line">            nodes.remove(leftNode);</span><br><span class="line">            nodes.remove(rightNode);</span><br><span class="line">            <span class="comment">//将新的二叉树，加入到nodes</span></span><br><span class="line">            nodes.add(parent);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//nodes 最后的结点，就是赫夫曼树的根结点</span></span><br><span class="line">        <span class="keyword">return</span> nodes.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Node ,待数据和权值</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Node</span>&gt; </span>&#123;</span><br><span class="line">    Byte data; <span class="comment">// 存放数据(字符)本身，比如&#x27;a&#x27; =&gt; 97 &#x27; &#x27; =&gt; 32</span></span><br><span class="line">    <span class="keyword">int</span> weight; <span class="comment">//权值, 表示字符出现的次数</span></span><br><span class="line">    Node left;<span class="comment">//</span></span><br><span class="line">    Node right;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Byte data, <span class="keyword">int</span> weight)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">        <span class="keyword">this</span>.weight = weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Node o)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 从小到大排序</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.weight - o.weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Node [data = &quot;</span> + data + <span class="string">&quot; weight=&quot;</span> + weight + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//前序遍历</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preOrder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.left.preOrder();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.right.preOrder();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="二叉排序树BST，binarySortTree"><a href="#二叉排序树BST，binarySortTree" class="headerlink" title="二叉排序树BST，binarySortTree"></a>二叉排序树BST，binarySortTree</h5><p>建树过程是add方法，进入一个节点，比较根节点的值，决定节点去左边还是右边：左边（右边）为空则赋值为node，不为空则继续递归left.add或者right.add</p>
<p>删除结点有三种情况</p>
<ol>
<li>删除的结点是叶子结点</li>
<li>是有一个子树的结点</li>
<li>是有两棵子树的结点</li>
</ol>
<h5 id="平衡二叉树AVL树（平衡二叉搜索树）：左右子树高度差不超过1"><a href="#平衡二叉树AVL树（平衡二叉搜索树）：左右子树高度差不超过1" class="headerlink" title="平衡二叉树AVL树（平衡二叉搜索树）：左右子树高度差不超过1"></a>平衡二叉树AVL树（平衡二叉搜索树）：左右子树高度差不超过1</h5><h5 id="2-3树（最简单的B树）"><a href="#2-3树（最简单的B树）" class="headerlink" title="2-3树（最简单的B树）"></a>2-3树（最简单的B树）</h5><ul>
<li>所有叶子结点都在同一层</li>
<li>两个子结点的结点叫二节点，二节点要么没有子结点，要么两个子结点</li>
<li>三个子结点的结点叫三节点，三节点要么没有子结点，要么两个子结点</li>
</ul>
<h5 id="2-3-4树，在2-3树基础上多了一种4结点的树"><a href="#2-3-4树，在2-3树基础上多了一种4结点的树" class="headerlink" title="2-3-4树，在2-3树基础上多了一种4结点的树"></a>2-3-4树，在2-3树基础上多了一种4结点的树</h5><h5 id="B树，B为Balance，即平衡树"><a href="#B树，B为Balance，即平衡树" class="headerlink" title="B树，B为Balance，即平衡树"></a>B树，B为Balance，即平衡树</h5><ul>
<li>B树的阶：一个节点的最多子结点个数。2-3树的阶为3。2-3-4树的阶为4</li>
</ul>
<h5 id="B-树，与B树不同的点在于，B-树的关键字信息只出现在叶子结点上（B树的非叶子结点可以保存关键字信息，B-树不保存）。"><a href="#B-树，与B树不同的点在于，B-树的关键字信息只出现在叶子结点上（B树的非叶子结点可以保存关键字信息，B-树不保存）。" class="headerlink" title="B+树，与B树不同的点在于，B+树的关键字信息只出现在叶子结点上（B树的非叶子结点可以保存关键字信息，B+树不保存）。"></a>B+树，与B树不同的点在于，B+树的关键字信息只出现在叶子结点上（B树的非叶子结点可以保存关键字信息，B+树不保存）。</h5><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/01/25/22a1dbdce1c4f88d8b4acdedb051813d-image-20210125211923006-32ce34.png" alt="image-20210125211923006"></p>
<h5 id="B-树，基于B-树的基础上，在块的空间使用率上有所改进，块的利用率最低为2-3。"><a href="#B-树，基于B-树的基础上，在块的空间使用率上有所改进，块的利用率最低为2-3。" class="headerlink" title="B*树，基于B+树的基础上，在块的空间使用率上有所改进，块的利用率最低为2/3。"></a>B*树，基于B+树的基础上，在块的空间使用率上有所改进，块的利用率最低为2/3。</h5><h5 id="图"><a href="#图" class="headerlink" title="图"></a>图</h5><p>DFS，深度优先，depth first search</p>
<p>BFS，广度优先，broad first search</p>
<h1 id="红书算法第四版"><a href="#红书算法第四版" class="headerlink" title="红书算法第四版"></a>红书算法第四版</h1><h4 id="Week-1"><a href="#Week-1" class="headerlink" title="Week 1"></a>Week 1</h4><h5 id="Quick-Find-快速查找"><a href="#Quick-Find-快速查找" class="headerlink" title="Quick Find  快速查找"></a>Quick Find  快速查找</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组内容相同的项是同一个连通分量</span></span><br><span class="line"><span class="comment"> * 时间复杂度：N^2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickFindUF</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] id;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QuickFindUF</span><span class="params">(<span class="keyword">int</span> N)</span></span>&#123;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; id.length; i++) </span><br><span class="line">            id[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">connected</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id[p] == id[q];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    	就是把p的数组值改成q的数组值</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pid = id[p];</span><br><span class="line">        <span class="keyword">int</span> qid = id[q];</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        	循环遍历，把所有和p数组值相同的数组值都改成q数组值</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt; id.length; i++)&#123;    </span><br><span class="line">            <span class="keyword">if</span> (id[i] == pid) </span><br><span class="line">                id[i] = qid; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="Quick-Union-快速合并"><a href="#Quick-Union-快速合并" class="headerlink" title="Quick Union   快速合并"></a>Quick Union   快速合并</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组的每一项代表父节点或者自身</span></span><br><span class="line"><span class="comment"> * 缺点在于可能树会特别高</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickUnionQF</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] id;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QuickUnionQF</span><span class="params">(<span class="keyword">int</span> N)</span></span>&#123;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N;i++) </span><br><span class="line">            id[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    	找根函数：当i不等于数组id里面自身对应的值时，把数组里的值赋值给i，以此迭代找到最终根节点</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">root</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(i != id[i]) </span><br><span class="line">            i = id[i];</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">connected</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> root(p) == root(q);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//union(p,q)把p的根连到q的根上，变成以q为根的一棵树</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = root(p);</span><br><span class="line">        <span class="keyword">int</span> j = root(q);</span><br><span class="line">        id[i] = j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="Quick-Union-Improvements-改进版快速合并"><a href="#Quick-Union-Improvements-改进版快速合并" class="headerlink" title="Quick Union Improvements   改进版快速合并"></a>Quick Union Improvements   改进版快速合并</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 树中任一节点的深度上限是以2为底 N的对数</span></span><br><span class="line"><span class="comment"> * 将小树的根节点连到大树的根节点下</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickUnionImprovementsUF</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ······</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = root(p);</span><br><span class="line">        <span class="keyword">int</span> j = root(q);</span><br><span class="line">        <span class="keyword">if</span>(i == j) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>(size[i] &lt; size[j])&#123;</span><br><span class="line">            id[i] = j;</span><br><span class="line">            size[j] += size[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            id[j] = i;</span><br><span class="line">            size[i] += size[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h4><p>没有循环：常数</p>
<p>二分：对数</p>
<p>循环：N</p>
<p>时间复杂度主要和循环相关</p>
<p>Θ(N^2)就是某个常数乘以N^2的简写</p>
<h4 id="Week-2"><a href="#Week-2" class="headerlink" title="Week 2"></a>Week 2</h4><h5 id="Stacks-堆栈-，可用数组或者链表实现，各有优点"><a href="#Stacks-堆栈-，可用数组或者链表实现，各有优点" class="headerlink" title="Stacks  堆栈 ，可用数组或者链表实现，各有优点"></a>Stacks  堆栈 ，可用数组或者链表实现，各有优点</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*  以链表实现堆栈Stacks</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Stack</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">private</span> Node first;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        Item item;</span><br><span class="line">        Node next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N ==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">        Node oldFirst = first;</span><br><span class="line">        first = <span class="keyword">new</span> Node();</span><br><span class="line">        first.item = item;</span><br><span class="line">        first.next = oldFirst;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">pop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Item item = first.item;</span><br><span class="line">        first = first.next;</span><br><span class="line">        N--;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="Queue-队列，可用数组或者链表实现，各有优点"><a href="#Queue-队列，可用数组或者链表实现，各有优点" class="headerlink" title="Queue 队列，可用数组或者链表实现，各有优点"></a>Queue 队列，可用数组或者链表实现，各有优点</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*  以链表实现堆栈Stacks</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Queue</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node first;</span><br><span class="line">    <span class="keyword">private</span> Node last;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">        Item item;</span><br><span class="line">        Node next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N ==<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> N;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">        Node oldLast = last;</span><br><span class="line">        last = <span class="keyword">new</span> Node();</span><br><span class="line">        last.item = item;</span><br><span class="line">        last.next = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty())</span><br><span class="line">            first = last;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            oldLast.next = last;</span><br><span class="line">        N++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">dequeue</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Item item = first.item;</span><br><span class="line">        first = first.next;</span><br><span class="line">        <span class="keyword">if</span>(isEmpty())</span><br><span class="line">            last = <span class="keyword">null</span>;</span><br><span class="line">        N--;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="Generics-泛型"><a href="#Generics-泛型" class="headerlink" title="Generics  泛型"></a>Generics  泛型</h5><p>java不允许创建泛型数组，所以new一个Object数组，然后强转成Item[]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FixedCapacityStack</span>&lt;<span class="title">Item</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Item[] s;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> N = ;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">FixedCapacityStack</span><span class="params">(<span class="keyword">int</span> capacity)</span></span>&#123;</span><br><span class="line">		s = (Item[]) <span class="keyword">new</span> Object[capacity];</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> N ==<span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Item item)</span></span>&#123;</span><br><span class="line">		s[N++] = item;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Item <span class="title">pop</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> s[--N];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="Iterator-迭代器"><a href="#Iterator-迭代器" class="headerlink" title="Iterator 迭代器"></a>Iterator 迭代器</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListIterrator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node current = first;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> current != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Item <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Item item = current.item;</span><br><span class="line">        current = current.next;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Sorting-Introduction-排序介绍"><a href="#Sorting-Introduction-排序介绍" class="headerlink" title="Sorting Introduction   排序介绍"></a>Sorting Introduction   排序介绍</h3><h5 id="Selection-sort-选择排序"><a href="#Selection-sort-选择排序" class="headerlink" title="Selection sort  选择排序"></a>Selection sort  选择排序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 选择排序：从左到右，从i=0开始，每次选择i+1项里最小的那个放在第i位的位置。</span></span><br><span class="line"><span class="comment"> * 对已经排序的数组进行比较的次数：二次的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Selection</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable v,Comparable w)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v.compareTo(w) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(Comparable[] a,<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        Comparable swap = a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = swap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = a.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> min = i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>; j &lt; N;j++)</span><br><span class="line">                <span class="keyword">if</span>(less(a[j],a[min]))</span><br><span class="line">                    min = j;</span><br><span class="line">            exch(a,i,min);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="Insertion-sort-插入排序"><a href="#Insertion-sort-插入排序" class="headerlink" title="Insertion sort  插入排序"></a>Insertion sort  插入排序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 插入排序：从左到右，i递增，每次把第i位向左移动到排序位置</span></span><br><span class="line"><span class="comment"> * 对已经排序的数组进行比较的次数：线性的 linear</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Insertion</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable v,Comparable w)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v.compareTo(w) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(Comparable[] a,<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        Comparable swap = a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = swap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = a.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; N;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i;j &gt; <span class="number">0</span>;j--)</span><br><span class="line">                <span class="keyword">if</span>(less(a[j],a[j-<span class="number">1</span>]))</span><br><span class="line">                    exch(a,j,j-<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="Shellsort-希尔排序"><a href="#Shellsort-希尔排序" class="headerlink" title="Shellsort  希尔排序"></a>Shellsort  希尔排序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 希尔排序，基于插入排序，区别在于每次回溯-h个位</span></span><br><span class="line"><span class="comment"> * 下面是一个使用 h = 3x+1 的增量序列完成的希尔排序</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shell</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable v,Comparable w)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v.compareTo(w) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(Comparable[] a,<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        Comparable swap = a[i];</span><br><span class="line">        a[i] = a[j];</span><br><span class="line">        a[j] = swap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = a.length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> h = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (h &lt; N/<span class="number">3</span>)</span><br><span class="line">            h = <span class="number">3</span>*h - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(h &gt;= <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = h;i &lt; N;i++)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = i;j &gt;= h &amp;&amp; less(a[j],a[j-h]);j -= h)</span><br><span class="line">                    exch(a,j,j-h);</span><br><span class="line">            &#125;</span><br><span class="line">            h = h/<span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="Shuffling-sort-混排洗牌算法"><a href="#Shuffling-sort-混排洗牌算法" class="headerlink" title="Shuffling sort  混排洗牌算法"></a>Shuffling sort  混排洗牌算法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Shuffling sort 混排洗牌算法</span></span><br><span class="line"><span class="comment"> * 一副52张的扑克牌有多少种排列方式：52！  答案是：52的阶乘 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StdRandom</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">shuffle</span><span class="params">(Object[] a)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = a.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; N;i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> r = StdRandom.uniform(i+<span class="number">1</span>);  <span class="comment">//between 0 and i</span></span><br><span class="line">            exch(a,i,r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="Week-3"><a href="#Week-3" class="headerlink" title="Week 3"></a>Week 3</h4><h5 id="Mergesort-归并排序"><a href="#Mergesort-归并排序" class="headerlink" title="Mergesort  归并排序"></a>Mergesort  归并排序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 用多个以排序的数组共同组成一个排序数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mergesort</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] a,Comparable[] aux,<span class="keyword">int</span> lo,<span class="keyword">int</span> mid,<span class="keyword">int</span> hi)</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a,lo,mid)</span></span>;  <span class="comment">//如果排好序返回true，否则返回false</span></span><br><span class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a,mid+<span class="number">1</span>,hi)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//copy  拷贝数组</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = lo;k &lt;= hi;k++)</span><br><span class="line">            aux[k] = a[k];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//merge 归并</span></span><br><span class="line">        <span class="keyword">int</span> i = lo,j = mid+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = lo;k &lt;=hi;k++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i &gt; mid)</span><br><span class="line">                a[k] = aux[j++];</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(j &gt; hi)</span><br><span class="line">                a[k] = aux[i++];</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(less(aux[j],aux[i]))</span><br><span class="line">                a[k] = aux[j++];</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                a[k] = aux[i++];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">assert</span> <span class="title">isSorted</span><span class="params">(a,lo,hi)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isSorted</span><span class="params">(Comparable[] a,<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * 这个函数返回a数组是否是从i到j有序排列的</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable v,Comparable w)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> v.compareTo(w) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h5 id="Bottom-up-Mergesort-从下到上的归并排序"><a href="#Bottom-up-Mergesort-从下到上的归并排序" class="headerlink" title="Bottom-up Mergesort  从下到上的归并排序"></a>Bottom-up Mergesort  从下到上的归并排序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BottomUpMergesort</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Comparable[] aux;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] a,<span class="keyword">int</span> lo,<span class="keyword">int</span> mid,<span class="keyword">int</span> hi)</span></span>&#123;</span><br><span class="line">        <span class="comment">/* as before */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> N = a.length;</span><br><span class="line">        aux = <span class="keyword">new</span> Comparable[N];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> sz = <span class="number">1</span>;sz &lt; N;sz = sz+sz)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> lo = <span class="number">0</span>;lo &lt; N-sz;lo += sz+sz)</span><br><span class="line">                merge(a,lo,lo+sz-<span class="number">1</span>,Math.min(lo+sz+sz-<span class="number">1</span>,N-<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;		</span><br></pre></td></tr></table></figure>





<h5 id="Sorting-Complexity-排序的复杂性"><a href="#Sorting-Complexity-排序的复杂性" class="headerlink" title="Sorting Complexity  排序的复杂性"></a>Sorting Complexity  排序的复杂性</h5><h5 id="Decision-tree-决策树："><a href="#Decision-tree-决策树：" class="headerlink" title="Decision tree  决策树："></a>Decision tree  决策树：</h5><h5 id="Stability-稳定性"><a href="#Stability-稳定性" class="headerlink" title="Stability  稳定性"></a>Stability  稳定性</h5><p>排序算法的性质之一。检验标准：是否会越过相同值？</p>
<ul>
<li><p>插入排序+归并排序具有</p>
</li>
<li><p>选择排序和希尔排序不具有</p>
</li>
</ul>
<h5 id="Quicksort-快速排序"><a href="#Quicksort-快速排序" class="headerlink" title="Quicksort   快速排序"></a>Quicksort   快速排序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 快速排序：</span></span><br><span class="line"><span class="comment"> * 选定一个值作为参照物K，从左为i，从右为j，当遇到i大于K时停止，j小于K时停止，交换此时[i]和[j]的值，</span></span><br><span class="line"><span class="comment"> * 之后继续，直到K左边都小于K，K右边都大于K，之后分别对左右进行排序，即可得到完整的序列</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span></span>&#123;</span><br><span class="line">        StdRandom.shuffle(a);</span><br><span class="line">        sort(a,<span class="number">0</span>,a.length-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(hi &lt;= lo)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> j = partition(a,lo,hi);</span><br><span class="line">        sort(a,lo,j-<span class="number">1</span>);</span><br><span class="line">        sort(a,j+<span class="number">1</span>,hi);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(Comparable[] a,<span class="keyword">int</span> lo,<span class="keyword">int</span> hi)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = lo,j = hi+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="keyword">while</span>(less(a[++i],a[lo]))</span><br><span class="line">                <span class="keyword">if</span>(i == hi) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">while</span>(less(a[lo],a[--j]))</span><br><span class="line">                <span class="keyword">if</span>(j == lo) <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(i &gt;= j) <span class="keyword">break</span>;</span><br><span class="line">            exch(a,i,j);</span><br><span class="line">        &#125;</span><br><span class="line">        exch(a,lo,j);</span><br><span class="line">        <span class="keyword">return</span> j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(Comparable[] a,<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(Comparable a,Comparable b)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/14/Servlet+JSP+Tomcat+Http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZYK的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/14/Servlet+JSP+Tomcat+Http/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-14T11:59:44+08:00">
                2021-03-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="互联网通信流程介绍"><a href="#互联网通信流程介绍" class="headerlink" title="互联网通信流程介绍"></a>互联网通信流程介绍</h1><h5 id="四。涉及技术【老旧】"><a href="#四。涉及技术【老旧】" class="headerlink" title="四。涉及技术【老旧】"></a>四。涉及技术【老旧】</h5><p>1.控制浏览器行为技术： HTML ，CSS ,JavaScript</p>
<p>2.控制硬盘上数据库行为技术：MySql数据库服务器管理使用（SQL重点），JDBC规范</p>
<p>3.控制服务端Java行为技术： Http服务器，Servlet，JSP</p>
<p>4.互联网通信流程开发规则： MVC</p>
<h5 id="五。什么是互联网通信"><a href="#五。什么是互联网通信" class="headerlink" title="五。什么是互联网通信"></a>五。什么是互联网通信</h5><p>两台计算机通过网络实现文件共享行为，就是【互联网通信】</p>
<h5 id="六。互联网通信过程角色划分"><a href="#六。互联网通信过程角色划分" class="headerlink" title="六。互联网通信过程角色划分"></a>六。互联网通信过程角色划分</h5><p>1.客户端计算机：用于发送请求，来索要资源文件的计算机</p>
<p>2.服务端计算机：用于接收请求，并提供对应的资源文件计算机</p>
<h5 id="七。互联网通信模型"><a href="#七。互联网通信模型" class="headerlink" title="七。互联网通信模型"></a>七。互联网通信模型</h5><p>1.C/S通信模型：企业办公领域相对应用较少</p>
<p>C：client software;客户端软件</p>
<p>​    1）客户端软件专门安装在客户端计算机上</p>
<p>​    2）帮助客户端计算机向指定服务端计算机发送请求，索要资源文件</p>
<p>​    3）帮助客户端计算机将服务端计算机发送回来【二进制数据】解析为【文字，数字，图片，视频，命令】</p>
<p>S：server software;服务器软件</p>
<p>​    1)服务器软件专门安装在服务端计算机上</p>
<p>​    2)服务器软件用于接收来自于特定的客户端软件发送请求</p>
<p>​    3)服务器软件在接收到请求之后自动的在服务端计算机上定位被访问的资源文件</p>
<p>​    4)服务器软件自动的将定位的文件内容解析为【二进制数据】通过网络发送回发起请求的客户端软件上</p>
<p>适用场景：C/S通信模型普遍用于个人娱乐市场，比如【微信，淘宝/京东，视频（优酷/B站），大型网络游戏(魔兽/英雄联盟)】</p>
<p>优点:<br>        1.安全性较高</p>
<p>​        2.有效降低服务端计算机工作压力</p>
<p>缺点：<br>        1.增加客户获得服务的成本</p>
<p>​        2.更新较为繁琐</p>
<p>2.B/S通信模型：</p>
<p>B：browser,浏览器</p>
<p>​    1）浏览器安装在客户端计算机软件</p>
<p>​    2）可以向任意服务器发送请求，索要资源文件</p>
<p>​    3）可以将服务器返回的【二进制数据】解析为【文字，数字，图片，视频，命令】</p>
<p>S：server software 服务器软件</p>
<p>​    1)服务器软件专门安装在服务端计算机上</p>
<p>​    2)可以接收任意浏览器发送请求</p>
<p>​    3)自动的在服务端计算机上定位被访问的资源文件</p>
<p>​    4)自动的将定位的资源文件内容以二进制形式发送回发起请求浏览器上</p>
<p>适用场景： 既适用于个人娱乐市场，又广泛适用于企业日常活动</p>
<p>优点：</p>
<p>​    1.不会增加用户获得服务的成本</p>
<p>​    2.几乎不需要更新浏览器</p>
<p>缺点：</p>
<p>​    1.几乎无法有效对服务端计算机资源文件进行保护</p>
<p>​    2.服务端计算机工作压力异常巨大—–》【B/S通信下高并发解决方案】</p>
<h5 id="八。共享资源文件："><a href="#八。共享资源文件：" class="headerlink" title="八。共享资源文件："></a>八。共享资源文件：</h5><p> 1.什么是共享资源文件:</p>
<p>可以通过网络进行传输的文件，都被称为共享资源文件</p>
<p>所有的文件内容都可以通过网络传输，所有文件都是共享资源文件</p>
<p> 2.Http服务器下对于共享资源文件分类</p>
<p>1）静态资源文件    </p>
<p>2）动态资源文件</p>
<p> 3.静态资源文件:</p>
<p>​     1) 如果文件内容是固定，这种文件被称为【静态资源文件】  (文档，图片，视频)</p>
<p>​     2) 如果文件存放不是内容而是命令，这些命令只能在浏览器编译与执行这种文件被称为【静态资源文件】（.html,.css,.js）</p>
<p> 4.动态资源文件:</p>
<p>​        如果文件存放命令，且命令不能在浏览器编译与执行；只能在服务端计算机编译执行，这样的文件被称为【动态资源文件】（.class）</p>
<p> 5.静态资源文件与动态资源文件调用区别</p>
<p>静态文件被索要时，Http服务器直接通过【输出流】将静态文件中内容或则命令以【二进制形式】推送给发起请求浏览器</p>
<p>动态文件被索要时，Http服务器需要创建当前class文件的实例对象,通过实例对象调用对应的方法处理用户请求，<br>通过【输出流】将运行结果以【二进制形式】推送给发起请求浏览器 </p>
<p>class Student{<br>    public int add(int num1,int num2){<br>        int sum = num1 + num2;<br>        return sum;<br>    }<br>}</p>
<p>Http服务器（自动）。new一个student，然后把传过来的结果存入，并调用对象输出<br>    Student stu = new Student();<br>    int 结果 = stu.add(10,20);<br>    out.print(结果)</p>
<h5 id="九。开发人员在互联网通信流程担负职责"><a href="#九。开发人员在互联网通信流程担负职责" class="headerlink" title="九。开发人员在互联网通信流程担负职责:"></a>九。开发人员在互联网通信流程担负职责:</h5><p>1.控制浏览器行为</p>
<p>2.开发动态资源文件来解决用户请求</p>
<h2 id="Http网络协议包"><a href="#Http网络协议包" class="headerlink" title="Http网络协议包"></a>Http网络协议包</h2><h5 id="一。网络协议包："><a href="#一。网络协议包：" class="headerlink" title="一。网络协议包："></a>一。网络协议包：</h5><p>1.在网络中传递信息都是以【二进制】形式存在的。</p>
<p>2.接收方【浏览器/服务器】在接收信息后，要做第一件事就是将【二进制数据】进行编译【文字，图片，视频，命令】</p>
<p>3.传递信息数据量往往比较巨大，导致接收方很难在一组连续二进制得到对应数据</p>
<p>比如 浏览器发送一个请求： <a target="_blank" rel="noopener" href="http://192.168.100.2:8080/index.html%EF%BC%8C%E8%BF%99%E4%B8%AA%E8%AF%B7%E6%B1%82%E4%BF%A1%E6%81%AF%E4%BB%A5%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%BD%A2%E5%BC%8F%E5%8F%91%E9%80%81">http://192.168.100.2:8080/index.html，这个请求信息以二进制形式发送</a> 01010101010110101010101101010，Http服务器很难从二进制数据得到相关信息</p>
<p>4.网络协议包一组有规律二进制数据，在这组数据存在了固定空间。每一个空间专门存放特定信息，这样接收方在接收网络协议包之后就可以到固定空间得到对应信息，网络协议包出现极大降低了接收方对接收二进制数据编译难度</p>
<p>【0000（ip地址）0000（端口号）0000（资源文件名）0000】</p>
<h5 id="二。常见网络协议："><a href="#二。常见网络协议：" class="headerlink" title="二。常见网络协议："></a>二。常见网络协议：</h5><p>1.FTP网络协议包</p>
<p>2.Http网络协议包</p>
<h5 id="三。Http网络协议包："><a href="#三。Http网络协议包：" class="headerlink" title="三。Http网络协议包："></a>三。Http网络协议包：</h5><p>在基于B/S结构下互联网通信过程中，所有在网络中传递信息都是保存在Http网络协议包</p>
<p>分类：</p>
<p>​      Http请求协议包</p>
<p>​      Http响应协议包</p>
<h5 id="四。Http请求协议包与Http响应协议包介绍"><a href="#四。Http请求协议包与Http响应协议包介绍" class="headerlink" title="四。Http请求协议包与Http响应协议包介绍:"></a>四。Http请求协议包与Http响应协议包介绍:</h5><p>1.Http请求协议包：</p>
<p>在浏览器准备发送请求时，负责创建一个Http请求协议包</p>
<p>浏览器将请求信息以二进制形式保存在Http请求协议包各个空间</p>
<p>由浏览器负责将Http请求协议包推送到指定服务端计算机</p>
<p>2.Http响应协议包：</p>
<p>Http服务器在定位到被访问的资源文件之后。</p>
<p>负责创建一个Http响应协议包，Http服务器将定位文件内容或则文件命令以</p>
<p>二进制形式写入到Http响应协议包各个空间，由Http服务器负责将Http响应协议包推送回发起请求的浏览器上。</p>
<h5 id="五。Http请求协议包内部空间：【背】"><a href="#五。Http请求协议包内部空间：【背】" class="headerlink" title="五。Http请求协议包内部空间：【背】"></a>五。Http请求协议包内部空间：【背】</h5><p>1.按照自上而下划分，分为4个空间</p>
<p>2.空间划分:</p>
<p>请求行：[</p>
<p>​            url:请求地址（<a target="_blank" rel="noopener" href="http://192.168.100.2:8080/index.html%EF%BC%89">http://192.168.100.2:8080/index.html）</a></p>
<p>​            method:请求方式（POST/GET）</p>
<p>]</p>
<p>请求头：[</p>
<p>​              请求参数信息【GET】</p>
<p>]</p>
<p>空白行：[</p>
<p>​                没有任何内容，起到隔离作用 </p>
<p>]</p>
<p>请求体：[</p>
<p>​               请求参数信息【POST】</p>
<p>]</p>
<h5 id="六。Http响应协议包内部结构-【背】"><a href="#六。Http响应协议包内部结构-【背】" class="headerlink" title="六。Http响应协议包内部结构 【背】"></a>六。Http响应协议包内部结构 【背】</h5><p>1.按照自上而下划分，分为4个空间</p>
<p>2.空间划分:</p>
<p>状态行：[</p>
<p>​              Http状态码     </p>
<p>]</p>
<p>响应头：[</p>
<p>​              content-type: 指定浏览器采用对应编译器对响应体二进制数据进行解析<br>]</p>
<p>空白行：[</p>
<p>​              没有任何内容，起到隔离作用<br>]</p>
<p>响应体：[</p>
<p>​    可能被访问静态资源文件内容</p>
<p>​    可能被访问的静态资源文件命令</p>
<p>​    可能被访问的动态资源文件运行结果</p>
<p>​                  **<em><strong>都是以二进制形式</strong></em><br>]</p>
<h1 id="Servlet：服务器端小程序-serv-let"><a href="#Servlet：服务器端小程序-serv-let" class="headerlink" title="Servlet：服务器端小程序 serv+let"></a>Servlet：服务器端小程序 serv+let</h1><h3 id="JavaSE和JavaEE？"><a href="#JavaSE和JavaEE？" class="headerlink" title="JavaSE和JavaEE？"></a>JavaSE和JavaEE？</h3><h5 id="1、什么是API？包括什么？"><a href="#1、什么是API？包括什么？" class="headerlink" title="1、什么是API？包括什么？"></a>1、什么是API？包括什么？</h5><p>​    API：应用程序编程接口</p>
<p>​    API包括：源码、字节码、帮助文档</p>
<h5 id="2、什么是JAVASE？"><a href="#2、什么是JAVASE？" class="headerlink" title="2、什么是JAVASE？"></a>2、什么是JAVASE？</h5><p>​    Java标准版本，SUN公司为java程序员提供的一套基础类库，这套基础类库包括：基础语法、面向对象、异常、IO、集合、反射、线程……JavaSE版本目前javase由Oracle维护</p>
<h5 id="3、JavaSE的源码、字节码、帮助文档在哪？"><a href="#3、JavaSE的源码、字节码、帮助文档在哪？" class="headerlink" title="3、JavaSE的源码、字节码、帮助文档在哪？"></a>3、JavaSE的源码、字节码、帮助文档在哪？</h5><p>​    -JAVA_HOME\src.zip    源码</p>
<p>​    -JRE_HOME\lib\rt.jar     字节码</p>
<p>​    -帮助文档</p>
<h5 id="4、什么是JAVAEE？"><a href="#4、什么是JAVAEE？" class="headerlink" title="4、什么是JAVAEE？"></a>4、什么是JAVAEE？</h5><p>​    java企业版。SUN公司为java程序员准备另一套庞大的类库，帮助程序员完成企业级项目开发。</p>
<h5 id="5、JAVAEE的版本号？"><a href="#5、JAVAEE的版本号？" class="headerlink" title="5、JAVAEE的版本号？"></a>5、JAVAEE的版本号？</h5><p>​    -目前我们所学习的JAVAEE版本号是JAVAEE5</p>
<p>​    -JAVAEE规范是一个比较大的规范，JAVAEE规范中包括13个子规范（每一个子规范下其实还有其它的子规范。）</p>
<p>​    -JAVAEE5规范下的子规范：</p>
<p>​        Servlet2.5</p>
<p>​        JDBC</p>
<p>​    -JAVAEE6规范下的子规范：</p>
<p>​        -Servlet3.0</p>
<p>​        -JDBC</p>
<p>​    -Tomcat服务器，其中Tomcat6实现了Servlet2.5规范，Tomcat7实现了Servlet3.0规范</p>
<p>​    我们使用的是Tomcat7</p>
<h3 id="Servlet："><a href="#Servlet：" class="headerlink" title="Servlet："></a>Servlet：</h3><h5 id="本质："><a href="#本质：" class="headerlink" title="本质："></a>本质：</h5><p>用户输入访问资源路径，然后Tomcat读取web.xml利用key去获得value，之后利用反射机制以value创建servlet对象，最后调用service方法即可。</p>
<h5 id="第一个带有Servlet的WebApp，FirstServletWebApp："><a href="#第一个带有Servlet的WebApp，FirstServletWebApp：" class="headerlink" title="第一个带有Servlet的WebApp，FirstServletWebApp："></a>第一个带有Servlet的WebApp，FirstServletWebApp：</h5><p>web.xml:</p>
<p>web.xml里面的url-pattern可以写多个</p>
<h5 id="将响应结果输出到浏览器中，PrintToBrowser："><a href="#将响应结果输出到浏览器中，PrintToBrowser：" class="headerlink" title="将响应结果输出到浏览器中，PrintToBrowser："></a>将响应结果输出到浏览器中，PrintToBrowser：</h5><h5 id="解决响应时中文乱码问题："><a href="#解决响应时中文乱码问题：" class="headerlink" title="解决响应时中文乱码问题："></a>解决响应时中文乱码问题：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>



<h5 id="Servlet对象生命周期"><a href="#Servlet对象生命周期" class="headerlink" title="Servlet对象生命周期"></a>Servlet对象生命周期</h5><p>1、什么是生命周期？</p>
<p>​            一个java对象从最初被创建到最终被销毁经历的所有过程</p>
<p>2、Servlet对象的生命周期是谁来管理的？程序员可以干涉吗？</p>
<p>​            Servlet对象的生命周期，javaweb程序员无权干涉。全部是由WEB容器来管理的</p>
<p>3、”默认情况下”，Servlet对象在WEB服务器启动阶段不会被实例化。</p>
<p>4、描述Servlet对象的生命周期：</p>
<p>​        1）用户在浏览器地址栏输入URL <a target="_blank" rel="noopener" href="http://localhost:8080/123">http://localhost:8080/123</a></p>
<p>​        2）web容器截取请求路径 /123</p>
<p>​        3）web容器在容器上下文中找请求路径/123对应的Servlet对象</p>
<p>​        4）若没有找到对应的Servlet对象</p>
<p>​                4.1）通过web.xml文件中相关的配置信息，得到请求路径/123对应的Servlet完整类名</p>
<p>​                4.2）通过反射机制，调用Servlet类的无参数构造方法完成Servlet对象的实例化</p>
<p>​                4.3）web容器调用Servlet对象的init方法初始化</p>
<p>​                4.4）web容器调用Servlet对象的service方法提供服务</p>
<p>​        5）若找到对应的Servlet对象</p>
<p>​                5.1）web容器直接调用Servlet对象的service方法提供服务</p>
<p>​        6）web容器关闭的时候/webapp重新部署的时候/该Servlet对象长时间没有用户再次访问的时候，web容器会将该Servlet对象销毁，在销毁对象之前，web容器会调用destroy方法完成销毁之前的准备</p>
<p>5、总结：</p>
<p>​    Servlet类的构造方法只执行一次；Servlet的init、destroy两个方法只执行一次；Servlet的service方法用户请求一次就执行一次</p>
<p>6、注意;</p>
<p>​    init方法执行的时候，Servlet对象已经被创建好了</p>
<p>​    destroy方法执行的时候，Servlet对象还没有被销毁</p>
<p>7、Servlet对象是单例，但是是伪单例。Tomcat服务器是多线程的，Servlet对象是在单实例多线程的环境下运行的。如果Servlet对象中有实例变量且涉及到修改操作，那么这个Servlet对象一定会存在线程安全问题，不建议在Servlet对象中使用实例变量，尽量使用局部变量</p>
<p>8、若希望在web服务器启动阶段实例化Servlet对象，需要在web.xml文件中操作<load-on-startup> 1</load-on-startup> ，这里的数字，从0到∞，优先级依次降低。</p>
<p>9、Servlet接口中的这些方法中编写什么代码？什么时候使用这些方法？</p>
<p>1）无参数构造方法</p>
<p>2）init方法</p>
<p>​        以上两个方法执行时间几乎是相同的，执行次数都是一次，构造方法执行的时候对象正在创建，init方法执行的时候对象已经创建：若要求对象在创建时执行一段程序，则写在init方法中</p>
<p>​        为什么不建议将代码编写到构造函数中？</p>
<p>​        存在风险。当程序员编写有参构造方法的时候会导致无参构造不存在。</p>
<p>​        Serlvet中的init方法是SUN公司为javaweb程序员专门提供的一个初始化时刻， 若希望在初始化时刻执行一段程序，则编写到init方法中等待自动调用。</p>
<p>3）service方法</p>
<p>​    这个方法是必然要重写的，因为在这个方法需要完成业务逻辑的处理，请求的处理以及完成响应。</p>
<p>​    而且这个方法的代码是最有价值的，也是最难写的</p>
<p>4）destroy方法</p>
<p>​    也是SUN公司为javaweb程序员提供的一个特殊的时刻，这个特殊的时刻被称为对象销毁时刻，若希望在销毁时刻执行一段特殊的代码，需要将这段代码编写到destroy方法中。</p>
<h5 id="UML（统一建模语言）：反应一个对象的生命周期"><a href="#UML（统一建模语言）：反应一个对象的生命周期" class="headerlink" title="UML（统一建模语言）：反应一个对象的生命周期"></a>UML（统一建模语言）：反应一个对象的生命周期</h5><p>1、什么是UML？</p>
<p>​    a）统一建模语言，在系统设计阶段由系统分析师使用的语言，使用这些图标语言体现设计思想。</p>
<p>​    b）后期程序员开发的依据就是这些设计图，属于软件工程学、与编程语言无关</p>
<p>2、UML图都有哪些？</p>
<p>​    a）类图：描述类的信息以及类和类之间的关系</p>
<p>​    b）时序图：描述一个程序的执行过程</p>
<p>​    c）用例图：站在系统用户的角度分析系统中存在哪些功能</p>
<p>​    d）状态图：描述一个对象的生命周期</p>
<h4 id="ServletConfig接口"><a href="#ServletConfig接口" class="headerlink" title="ServletConfig接口"></a>ServletConfig接口</h4><p>在 Servlet 接口的 init()方法中有一个参数 ServletConfig，这个参数类型是个接口，里面是一些 在 web.xml 中对当前 Servlet类的配置信息。Servlet 规范将Servlet 的配置信息全部封装到了 ServletConfig 接口对象中。在tomcat调用 init()方法时，首先会将 web.xml 中当前 Servlet 类的配置信息封装为一个对象。这个对象的类型实现了 ServletConfig 接口， Web 容器会将这个对象传递给init()方法中的 ServletConfig 参数。</p>
<p>​    1、Tomcat服务器是一个实现了Servlet规范和JSP规范的容器</p>
<p>​    2、我们不关心ServletConfig接口的具体实现类，我们只关心接口中有哪些可以使用的方法</p>
<p>​    3、ServletConfig是一个Servlet对象的配置信息对象，ServletConfig对象中封装了一个Servlet对象的配置信息。一个Servlet对象对应一个ServletConfig对象</p>
<p>​    4、将init方法上的ServletConfig参数移动到service方法中，因为我们程序员主要编写的方法是service方法，我们在service方法中可能需要使用ServletConfig</p>
<p>​        在init方法中完成：this.config = config;</p>
<p>​        实现getServletConfig方法的目的是给子类使用ServletConfig</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ServletConfig config;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="comment">//将局部变量config赋值给实例变量config</span></span><br><span class="line">        <span class="comment">//目的：在service方法中也可以使用config</span></span><br><span class="line">        <span class="comment">//我们写这条语句的目的是把tomcat服务器传过来的config对象变成全局对象供其他方法使用</span></span><br><span class="line">        <span class="keyword">this</span>.config = config;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest request, ServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        PrintWriter out = response.getWriter();</span><br><span class="line">        <span class="comment">//获取ServletConfig</span></span><br><span class="line">        ServletConfig config = getServletConfig();</span><br><span class="line">        <span class="comment">//通过初始化参数的name获取value</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        String driver = config.getInitParameter(&quot;driver&quot;);</span></span><br><span class="line"><span class="comment">        String url = config.getInitParameter(&quot;url&quot;);</span></span><br><span class="line"><span class="comment">        String user = config.getInitParameter(&quot;user&quot;);</span></span><br><span class="line"><span class="comment">        String password = config.getInitParameter(&quot;password&quot;);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        out.print(driver);</span></span><br><span class="line"><span class="comment">        out.print(&quot;&lt;br&gt;&quot;);</span></span><br><span class="line"><span class="comment">        out.print(url);</span></span><br><span class="line"><span class="comment">        out.print(&quot;&lt;br&gt;&quot;);</span></span><br><span class="line"><span class="comment">        out.print(user);</span></span><br><span class="line"><span class="comment">        out.print(&quot;&lt;br&gt;&quot;);</span></span><br><span class="line"><span class="comment">        out.print(password);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取所有初始化参数的name</span></span><br><span class="line">        Enumeration&lt;String&gt; names = config.getInitParameterNames();</span><br><span class="line">        <span class="keyword">while</span>(names.hasMoreElements())&#123;</span><br><span class="line">            String name = names.nextElement();</span><br><span class="line">            String value = config.getInitParameter(name);</span><br><span class="line">            out.print(name + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">            out.print(<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//这个方法供子类使用，子类调用此方法获取ServletConfig</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="ServletConfig接口中的那些常用方法："><a href="#ServletConfig接口中的那些常用方法：" class="headerlink" title="ServletConfig接口中的那些常用方法："></a>ServletConfig接口中的那些常用方法：</h5><p>​    String getInitParameter(String name)：通过初始化参数的name获取value</p>
<p>​    Enumeration getInitParameterNames()：获取所有初始化参数的name</p>
<p>​    String getServletName()：获取<servlet-name>servletname</servlet-name></p>
<p>​    ServletContext getServletContext()：获取ServletContext【Servlet上下文】对象</p>
<h4 id="ServletContext接口"><a href="#ServletContext接口" class="headerlink" title="ServletContext接口"></a>ServletContext接口</h4><p>（利用config.getServletContext方法获取）</p>
<p>1、javax.serlvet.ServletContext接口，Servlet规范</p>
<p>2、javaweb程序员只需要面向SerlvetContext接口调用方法即可，不需要关心Tomcat具体的实现</p>
<p>3、SerlvetContext到底是什么？什么时候被创建？什么时候被销毁？创建几个？</p>
<p>​        - 一个webapp只有一个web.xml文件，web.xml文件服务器启动阶段被解析。</p>
<p>​        - 一个webapp只有一个ServletContext对象，ServletContext在服务器启动阶段被实例化。</p>
<p>​        - ServletContext在服务器关闭的时候会被销毁。</p>
<p>​        - ServletContext对应的是web.xml文件，是web.xml文件的代表。</p>
<p>​        - 在同一个webapp中，所有的Servlet对象共享同一个ServletContext对象。</p>
<p>​        - 所有的用户若想共享同一个数据，可以将这个数据放到ServletContext对象中。</p>
<p>​        - 一般放到ServletContext对象中的数据是不建议涉及到修改操作的，它是多线程共享的，存在安全问题</p>
<p>4、SerlvetContext接口中有哪些常用方法？</p>
<ul>
<li><p>Object getAttribute(String name)</p>
</li>
<li><p>void removeAttribute(String name)</p>
</li>
<li><p>void setAttribute(String name，Object object)</p>
</li>
<li><p>String getInitParameter(String name)  ，通过name获取value</p>
</li>
<li><p>Enumeration getInitParameter()  ，获取所有的value</p>
<ul>
<li>String getRealPath(String path)，获取绝对路径</li>
</ul>
</li>
</ul>
<p>5、Serlvet、ServletConfig、ServletContext之间的关系？</p>
<p>​        一个Servlet对应一个ServletConfig对象，100个Servlet对应100个ServletConfig</p>
<p>​        所有的Servlet共享一个ServletContext对象</p>
<h5 id="在web-xml文件中设置欢迎页面"><a href="#在web-xml文件中设置欢迎页面" class="headerlink" title="在web.xml文件中设置欢迎页面"></a>在web.xml文件中设置欢迎页面</h5><p>index.html、 index.htm、 index.jsp都是默认的欢迎页面，系统自动配置过，不需要我们在web.xml中额外配置 </p>
<p>欢迎页面不一定非要是html，可以是jsp，可以是htm，也可以是Servlet，是任何一种web资源即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--欢迎页面可以设置多个，越靠上优先级越高--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>login.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>html/welcome.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--优先选择login.html，若此资源不存在，才会选择html/welcome.html--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--路径不需要以&quot;/&quot;开始，只需要从webapp的根目录开始即可--&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="关于web开发中的错误代码，HTTP状态码404-500"><a href="#关于web开发中的错误代码，HTTP状态码404-500" class="headerlink" title="关于web开发中的错误代码，HTTP状态码404/500"></a>关于web开发中的错误代码，HTTP状态码404/500</h5><p>正确的HTTP协议状态码：200【OK】</p>
<p>404：资源路径有问题</p>
<p>500：服务器内部的错误</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--用web.xml配置统一的错误处理方式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">location</span>&gt;</span>error.html<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="缺省适配器模式Generic"><a href="#缺省适配器模式Generic" class="headerlink" title="缺省适配器模式Generic"></a>缺省适配器模式Generic</h5><p>​    我们目前所有的Servlet类直接实现了javax.servlet.Servlet接口，但是这个接口中有很多方法是目前不需要的，我们可能只需要编写service。直接实现Servlet接口代码丑陋，有必要在中间添加一个适配器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * GenericServlet是一个适配器，这个适配器是一个Servlet</span></span><br><span class="line"><span class="comment"> * 以后javaweb程序员无需直接实现Servlet接口了，去继承这个适配器即可，重写service方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ServletConfig config;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.config = servletConfig;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> config;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="string">&quot;&quot;</span>;&#125;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">//------------------以下方法是扩展方法，方便子类的使用-----------------------</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletContext <span class="title">getServletContext</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getServletConfig().getServletContext();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是我们不需要自己写一个适配器，因为SUN公司已经写好了一个GenericServlet，我们只需要继承javax.servlet.GenericServlet重写无参数的init和service方法即可。</p>
<h4 id="HTTP协议的详细内容："><a href="#HTTP协议的详细内容：" class="headerlink" title="HTTP协议的详细内容："></a>HTTP协议的详细内容：</h4><p>1.1    什么是HTTP协议？</p>
<ul>
<li>超文本传输协议</li>
<li>浏览器和服务器之间的一种通讯协议</li>
<li>该协议是W3C负责制定的，本质上就是数据传送格式，浏览器和服务器以这种数据格式进行接收和发送</li>
<li>请求和响应</li>
</ul>
<p>1.2    HTTP协议的版本号？</p>
<p>​    HTTP1.1</p>
<p>1.3    请求协议：四部分？</p>
<p>​    请求行</p>
<p>​    消息报头</p>
<p>​    空白行</p>
<p>​    请求体</p>
<p>​    请求行包括：请求方式 URI 协议版本号</p>
<p>​    空白行：专门用来分离消息报头和请求体的</p>
<p>1.4    响应协议：四部分？</p>
<p>​    状态行</p>
<p>​    响应报头</p>
<p>​    空白行</p>
<p>​    响应体</p>
<p>​    状态行：协议版本号HTTP/1.1   状态码200   状态描述信息OK</p>
<p>​    空白行：分离响应报头和响应体</p>
<p>重点掌握状态码：200 响应正常</p>
<p>​                                404 资源未找到</p>
<p>​                                500 服务器内部错误</p>
<h5 id="GET请求和POST请求："><a href="#GET请求和POST请求：" class="headerlink" title="GET请求和POST请求："></a>GET请求和POST请求：</h5><p>什么情况是POST请求？什么情况是GET请求？</p>
<ul>
<li>只有使用表单form且method设置为”post”时才是post，其他情况都是GET方式。</li>
</ul>
<p>GET请求和POST请求的区别？</p>
<ul>
<li><p>GET请求在请求行上提交数据，这种提交方式最终提交的数据会显示到浏览器的地址栏上</p>
</li>
<li><p>POST请求在请求体中提交数据，不会在地址栏上显示</p>
</li>
<li><p>POST请求的数据没有长度限制，GET请求的数据长度有限制</p>
</li>
<li><p>GET请求只能提交字符串数据，POST请求可以提交任何类型的数据，包括视频，所以文件上传必须使用POST请求</p>
</li>
<li><p>GET请求最终的结果会被浏览器缓存收纳。而POST请求的结果不会被缓存</p>
</li>
</ul>
<p>GET请求和POST请求如何选择？</p>
<ul>
<li>有敏感数据，必须POST</li>
<li>不是普通字符串，必须POST</li>
<li>传送的数据非常多，必须POST</li>
<li>请求是为了修改服务器资源，必须POST</li>
</ul>
<p>GET请求，多数是从服务器读取资源，需要被浏览器缓存</p>
<p>POST请求是修改服务器，每次都不一样，不需要被缓存</p>
<h5 id="缓存解决方案"><a href="#缓存解决方案" class="headerlink" title="缓存解决方案"></a>缓存解决方案</h5><p>不想存储GET缓存，在URL最后使用JS的获取毫秒避免路径相同即可</p>
<h5 id="保证前端请求方式和后台程序处理方式一致"><a href="#保证前端请求方式和后台程序处理方式一致" class="headerlink" title="保证前端请求方式和后台程序处理方式一致"></a>保证前端请求方式和后台程序处理方式一致</h5><h5 id="前端的页面发送的请求方式应当和服务器需要的请求方式一样"><a href="#前端的页面发送的请求方式应当和服务器需要的请求方式一样" class="headerlink" title="前端的页面发送的请求方式应当和服务器需要的请求方式一样"></a>前端的页面发送的请求方式应当和服务器需要的请求方式一样</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用if语句判断</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;POST&quot;</span>.equals(method))&#123;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;GET&quot;</span>.equals(method))&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="怎么在javaweb程序中获取请求方式？"><a href="#怎么在javaweb程序中获取请求方式？" class="headerlink" title="怎么在javaweb程序中获取请求方式？"></a>怎么在javaweb程序中获取请求方式？</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先进行类型强转，把ServletRequest变成HttpServletRequest</span></span><br><span class="line">HttpServletRequest request = (HttpServletRequest)req;</span><br><span class="line">HttpServletResponse response = (HttpServletResponse)res;</span><br><span class="line"></span><br><span class="line"><span class="comment">//HttpServletRequest的方法</span></span><br><span class="line">request.getMethod();</span><br></pre></td></tr></table></figure>

<h5 id="将GenericServlet封装成一个HttpServlet，实现doGet和doPost"><a href="#将GenericServlet封装成一个HttpServlet，实现doGet和doPost" class="headerlink" title="将GenericServlet封装成一个HttpServlet，实现doGet和doPost"></a>将GenericServlet封装成一个HttpServlet，实现doGet和doPost</h5><p>get请求重写doGet、post请求重写doPost。doPost和doGet等同看做main方法</p>
<h5 id="模板方法设计模式？"><a href="#模板方法设计模式？" class="headerlink" title="模板方法设计模式？"></a>模板方法设计模式？</h5><p>​    Servlet规范中的：HttpServlet是一个典型的模板方法设计模式</p>
<p>​    HttpServlet是一个模板类，service方法是典型的模板方法，定义了核心算法骨架，doGet、doPost具体的实现步骤延迟到子类中完成</p>
<h4 id="HttpServletRequest接口"><a href="#HttpServletRequest接口" class="headerlink" title="HttpServletRequest接口"></a>HttpServletRequest接口</h4><ul>
<li><p>String getParameter(String name);     //获取value里面的第一个</p>
</li>
<li><p>String[] getParameterValues(String name);    //获取所有的value，适合用来取checkbox里面的数据</p>
</li>
<li><p>Map getParameterMap();    //获取Map</p>
</li>
<li><p>Enumeration getParameterNames();    //获取所有key</p>
</li>
<li><p>Object getAttribute(String name)</p>
</li>
<li><p>void setAttribute(String name,Object o)</p>
</li>
<li><p>void removeAttribute(String name)</p>
<p>同一个请求中存储，在同一个请求不同的Servlet也可以访问存储的Attribute</p>
</li>
</ul>
<ul>
<li><p>RequestDispatcher getRequestDispatcher(String path)     //获取请求转发器</p>
</li>
<li><p>forward(request,response)    //</p>
</li>
<li><p>void setCharacterEncoding(String )      //解决乱码</p>
</li>
</ul>
<h5 id="web程序中乱码的解决方案"><a href="#web程序中乱码的解决方案" class="headerlink" title="web程序中乱码的解决方案"></a>web程序中乱码的解决方案</h5><p>1、乱码出现的位置：</p>
<ul>
<li>数据”传递”</li>
<li>数据”展示”</li>
<li>数据”保存”</li>
</ul>
<p>2、</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java中：response.setContentType(&quot;text&#x2F;html;charset&#x3D;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">html中：&lt;meta content&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>3、解决传递过程中的乱码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span>[] bytes = dname.getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>);  <span class="comment">//解码</span></span><br><span class="line">dname = <span class="keyword">new</span> String(bytes,<span class="string">&quot;UTF-8&quot;</span>);   <span class="comment">//编码【这里的编码方式和浏览器相同】</span></span><br></pre></td></tr></table></figure>





<h5 id="web中资源跳转的方式：转发和重定向"><a href="#web中资源跳转的方式：转发和重定向" class="headerlink" title="web中资源跳转的方式：转发和重定向"></a>web中资源跳转的方式：转发和重定向</h5><p>转发RequestDispatcher   ：一次请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.getRequestDispatcher(<span class="string">&quot;/b&quot;</span>).forward(request,response);</span><br></pre></td></tr></table></figure>

<p>重定向sendRedirects    ：两次请求，浏览器会重新发送一次request请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requese.sendRedirect(request.getContextPath() + <span class="string">&quot;/b&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>转发是request对象触发的，重定向是response对象触发的</li>
<li>转发是第一请求，地址栏不会变化</li>
<li>重定向是第二请求，地址栏会变化</li>
</ul>
<h4 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(String cookieName,String cookieValue);		</span><br></pre></td></tr></table></figure>

<ul>
<li>Cookie 由name和value组成，都是字符串String类型</li>
<li>请求路径和Cookie是相关的，不同的请求路径会发送提交不同的Cookie</li>
</ul>
<ul>
<li>路径是可以指定的，可以将Cookie和某个特定的路径绑定在一起</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookie.setPath(<span class="string">&quot;URI&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>默认情况下，cookie被保存在浏览器缓存中，通过设置cookie的有效时长可以将cookie保存在硬盘中</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cookie1.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>);    <span class="comment">//有效期60s*60m*24h=1天</span></span><br></pre></td></tr></table></figure>



<h5 id="javaweb中路径的编写形式"><a href="#javaweb中路径的编写形式" class="headerlink" title="javaweb中路径的编写形式"></a>javaweb中路径的编写形式</h5><h5 id="url-pattern用来给Servlet设置访问路径，可以设置多个，也可以设置多种形式"><a href="#url-pattern用来给Servlet设置访问路径，可以设置多个，也可以设置多种形式" class="headerlink" title="url-pattern用来给Servlet设置访问路径，可以设置多个，也可以设置多种形式"></a>url-pattern用来给Servlet设置访问路径，可以设置多个，也可以设置多种形式</h5><h4 id="HttpSession"><a href="#HttpSession" class="headerlink" title="HttpSession"></a>HttpSession</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HttpSession session = request.getSession();        <span class="comment">//获取session，不存在则新建</span></span><br><span class="line">HttpSession session = request.getSession(<span class="keyword">true</span>);    <span class="comment">//获取session，不存在则新建</span></span><br><span class="line">HttpSession session = request.getSession(<span class="keyword">false</span>);   <span class="comment">//获取session，不存在则返回null</span></span><br></pre></td></tr></table></figure>

<ul>
<li>不止javaweb，只要是web开发都有Session机制</li>
<li>Cookie将会话状态保存在客户端，HttpSession将会话状态保存在服务器端</li>
<li>“打开浏览器到关闭浏览器”表示一次完整会话</li>
</ul>
<h5 id="session的实现原理："><a href="#session的实现原理：" class="headerlink" title="session的实现原理："></a>session的实现原理：</h5><ul>
<li>打开浏览器，在浏览器上发送首次请求</li>
<li>服务器会创建一个HttpSession对象，该对象代表一次会话</li>
<li>同时生成HttpSession对象对应的Cookie对象，并且Cookie对象的name是JSESSIONID、value是32位长度的字符串</li>
<li>服务器将Cookie的value和HttpSession对象绑定到session列表中</li>
<li>服务器将Cookie完整发送给浏览器客户端</li>
<li>浏览器客户端将Cookie保存到缓存中</li>
<li>只要浏览器不关闭，Cookie不会消失</li>
<li>当再次发送请求的时候，会自动提交缓存当中的Cookie</li>
<li>服务器接收到Cookie，验证该Cookie的name确实是：JSESSIONID，然后获取该Cookie的value</li>
<li>通过Cookie的value去session列表中检索对应的HttpSession对象</li>
</ul>
<h5 id="什么是一次会话？本质上的一次会话？"><a href="#什么是一次会话？本质上的一次会话？" class="headerlink" title="什么是一次会话？本质上的一次会话？"></a>什么是一次会话？本质上的一次会话？</h5><ul>
<li>一般多数情况下：用户打开浏览器，在浏览器上进行操作，然后将浏览器关闭，表示一次会话结束</li>
<li>本质上：从session对象的创建到最终session对象超时之后销毁，这个才是真正意义的一次完整会话</li>
</ul>
<h5 id="应用范围applocation、会话范围session、请求范围request"><a href="#应用范围applocation、会话范围session、请求范围request" class="headerlink" title="应用范围applocation、会话范围session、请求范围request"></a>应用范围applocation、会话范围session、请求范围request</h5><p>applocation &gt; session &gt; request</p>
<ul>
<li>application完成跨会话共享数据</li>
<li>session完成跨请求共享数据，请求必须在同一个会话中</li>
<li>request完成跨Servlet共享数据，这些Servlet必须在同一个请求中【转发】</li>
</ul>
<h1 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h1><p>JSP就是为了节省out.print(“”);的书写，所以直接将java代码搬到JSP页面中显示</p>
<p>我们把一些数据存入JSP的内置对象中（request、session、application），然后再JSP中提取这些数据进行我们需要的处理操作（写入页面等）</p>
<h5 id="HTML和JSP的区别"><a href="#HTML和JSP的区别" class="headerlink" title="HTML和JSP的区别"></a>HTML和JSP的区别</h5><p>1、作为资源文件类型不同：</p>
<pre><code>HTML文件属于静态资源文件，其相关命令需要在浏览器编译并执行的

JSP文件属于动态资源文件，其相关命令需要在服务端编译并执行的
</code></pre>
<p>2、调用形式不同</p>
<pre><code>如果浏览器访问HTML文件，此时Http服务器直接通过一个输出流将HTML文件中所有的内容写入到响应体

如果浏览器访问JSP文件。此时Http服务器根据JSP规范来操作JSP文件编辑----&gt;编译-----&gt;调用
</code></pre>
<h5 id="JSP内置对象：request"><a href="#JSP内置对象：request" class="headerlink" title="JSP内置对象：request"></a>JSP内置对象：request</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">   JSP文件内置对象: request</span><br><span class="line">             类型：HttpServletRequest</span><br><span class="line">             作用: 在JSP文件运行时读取请求包信息</span><br><span class="line">                  与Servlet在请求转发过程中实现数据共享</span><br><span class="line"></span><br><span class="line">  在浏览器输入以下内容： http:<span class="comment">//localhost:8080/myWeb/request.jsp?userName=allen&amp;password=123，则会将userName和password存入JSP内置的request对象中</span></span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">//在JSP文件执行时，借助于内置request对象读取请求包参数信息</span></span><br><span class="line">    String userName = request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">    String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">来访用户姓名:&lt;%=userName%&gt;&lt;br/&gt;</span><br><span class="line">来访用户密码:&lt;%=password%&gt;</span><br></pre></td></tr></table></figure>

<h5 id="JSP内置对象：session"><a href="#JSP内置对象：session" class="headerlink" title="JSP内置对象：session"></a>JSP内置对象：session</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">    JSP文件内置对象:session</span><br><span class="line">              类型:HttpSession</span><br><span class="line">              作用：JSP文件在运行时，可以session指向当前用户私人储物柜，添加</span><br><span class="line">                   共享数据，或则读取共享数据</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--将共享数据添加到当前用户私人储物柜--&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// HttpSession session = request.getSession();</span></span><br><span class="line">   session.setAttribute(<span class="string">&quot;key1&quot;</span>, <span class="number">200</span>);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">      session_1.jsp与session_2.jsp为同一个用户/浏览器提供服务。</span><br><span class="line">      因此可以使用当前用户在服务端的私人储物柜进行数据共享</span><br><span class="line"> --&gt;</span><br><span class="line">&lt;%</span><br><span class="line">     Integer value=(Integer)session.getAttribute(<span class="string">&quot;key1&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">session_2.jsp从当前用户session中读取数据:&lt;%=value%&gt;</span><br></pre></td></tr></table></figure>

<h5 id="JSP内置对象：application"><a href="#JSP内置对象：application" class="headerlink" title="JSP内置对象：application"></a>JSP内置对象：application</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">       ServletContext application;全局作用域对象</span><br><span class="line">       同一个网站中Servlet与JSP，都可以通过当前网站的全局作用域对象实现数据共享</span><br><span class="line">       JSP文件内置对象 ： application</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    application.setAttribute(<span class="string">&quot;key1&quot;</span>, <span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OneServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        </span><br><span class="line">        ServletContext application = request.getServletContext();</span><br><span class="line">        String value = (String)application.getAttribute(<span class="string">&quot;key1&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;value = &quot;</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="Servlet和JSP文件分工"><a href="#Servlet和JSP文件分工" class="headerlink" title="Servlet和JSP文件分工"></a>Servlet和JSP文件分工</h5><p>1、Servlet 与   JSP 分工:</p>
<pre><code>Servlet： 负责处理业务并得到【处理结果】--------------------大厨

JSP：     不负责业务处理，主要任务将Servlet中【处理结果】写入到响应体----传菜员
</code></pre>
<p>2、Servlet 与  JSP 之间调用关系</p>
<p>   Servlet工作完毕后，一般通过请求转发方式 向Tomcat申请调用JSP</p>
<p>3、Servlet  与 JSP 之间如何实现数据共享</p>
<p>   Servlet将处理结果添加到【请求作用域对象】</p>
<p>   JSP文件在运行时从【请求作用域对象】得到处理结果</p>
<h5 id="JSP文件运行原理"><a href="#JSP文件运行原理" class="headerlink" title="JSP文件运行原理"></a>JSP文件运行原理</h5><p>一、Http服务器调用JSP文件步骤:</p>
<pre><code>1.Http服务器将JSP文件内容【编辑】为一个Servlet接口实现类（.java）

2.Http服务器将Servlet接口实现类【编译】为class文件(.class)

3.Http服务器负责创建这个class的实例对象，这个实例对象就是Servlet实例对象

4.Http服务器通过Servlet实例对象调用_jspService方法，将jsp文件内容写入到响应体
</code></pre>
<p>二、Http服务器【编辑】与【编译】JSP文件位置：</p>
<pre><code>标准答案：我在【work】下看到这个证据

C:\Users\[登录windows系统用户角色名]\.IntelliJIdea2018.3\system\tomcat\[网站工作空间]\work\Catalina\localhost\【网站别名】\org\apache\jsp
</code></pre>
<p>三、当一个JSP文件被访问时，Tomcat调用的并不是当前JSP文件,而是JSP文件对应的Servlet接口实现类中_jspService方法。    </p>
<p>_jspService方法负责将开发人员在JSP文件书写的所有内容写入到响应体中</p>
<p>四、</p>
<ul>
<li><p>判断当前请求方式。Jsp文件可以接收的请求方式有POST,GET,HEAD</p>
</li>
<li><p>声明局部变量。这些局部变量都可以在JSP文件开发时直接使用</p>
</li>
<li><p>输出部分。这部分执行时将JSP文件内容通过输出流写入到响应体</p>
</li>
</ul>
<h1 id="EL表达式"><a href="#EL表达式" class="headerlink" title="EL表达式"></a>EL表达式</h1><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">     Integer sid = (Integer)application.getAttribute(<span class="string">&quot;sid&quot;</span>);</span><br><span class="line">     String  sname = (String)session.getAttribute(<span class="string">&quot;sname&quot;</span>);</span><br><span class="line">     String  home = (String)request.getAttribute(<span class="string">&quot;home&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">学员ID:&lt;%=sid%&gt;&lt;br/&gt;</span><br><span class="line">学员姓名:&lt;%=sname%&gt;&lt;br/&gt;</span><br><span class="line">学员地址:&lt;%=home%&gt;</span><br><span class="line"></span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;!--以下三句是EL表达式--&gt;</span><br><span class="line">学员ID:$&#123;applicationScope.sid&#125;&lt;br/&gt;</span><br><span class="line">学员姓名:$&#123;sessionScope.sname&#125;&lt;br/&gt;</span><br><span class="line">学员地址:$&#123;requestScope.home&#125;</span><br></pre></td></tr></table></figure>

<h5 id="一、EL表达式"><a href="#一、EL表达式" class="headerlink" title="一、EL表达式"></a>一、EL表达式</h5><p> 1.命令格式：${作用域对象别名.共享数据}</p>
<p> 2.命令作用：</p>
<pre><code>1）EL表达式是EL工具包提供一种特殊命令格式【表达式命令格式】

2）EL表达式在JSP文件上使用

3）负责在JSP文件上从作用域对象读取指定的共享数据并输出到响应体
</code></pre>
<h5 id="二、EL表达式——作用域对象别名"><a href="#二、EL表达式——作用域对象别名" class="headerlink" title="二、EL表达式——作用域对象别名"></a>二、EL表达式——作用域对象别名</h5><p>1.JSP文件可以使用的作用域对象</p>
<pre><code>1) ServletContext  application:全局作用域对象

2) HttpSession  session:会话作用域对象

3) HttpServletRequest  request:请求作用域对象

4) PageContext  pageContext:当前页作用域对象，这是JSP文件独有的作用域对象。Servlet中不存在。
</code></pre>
<p>在当前页作用域对象存放的共享数据仅能在当前JSP文件中使用，不能共享给其他Servlet或其他JSP文件。<br>    真实开发过程，主要用于JSTL标签与JSP文件之间数据共享<br>              数据<br>    JSTL———–&gt;pageContext———–&gt;JSP</p>
<p>2.EL表达式提供作用域对象别名</p>
<pre><code> JSP                       EL表达式
</code></pre>
<p>application            ${applicationScope.共享数据名}</p>
<p>session                   ${sessionScope.共享数据名}</p>
<p>request                  ${requestScope.共享数据名}</p>
<p>pageContext          ${pageScope.共享数据名}</p>
<h5 id="三、EL表达式将引用对象属性写入到响应体"><a href="#三、EL表达式将引用对象属性写入到响应体" class="headerlink" title="三、EL表达式将引用对象属性写入到响应体"></a>三、EL表达式将引用对象属性写入到响应体</h5><p> 1.命令格式：${作用域对象别名.共享数据名.属性名}</p>
<p> 2.命令作用：从作用域对象读取指定共享数据关联的引用对象的属性值，并自动将属性的结果写入到响应体</p>
<p> 3.属性名： 一定要与引用类型属性名大小写完全一致</p>
<p> 4.EL表达式没有提供遍历集合方法，因此无法从作用域对象读取集合内容输出</p>
<h5 id="四、EL表达式简化版"><a href="#四、EL表达式简化版" class="headerlink" title="四、EL表达式简化版"></a>四、EL表达式简化版</h5><p> 1.命令格式： ${共享数据名}</p>
<p> 2.命令作用： EL表达式允许开发人员开发时省略作用域对象别名</p>
<p> 3.工作原理：<br>              EL表达式简化版由于没有指定作用域对象，所以在执行时采用【猜】算法。【从小猜到大】</p>
<pre><code>  首先到【pageContext】定位共享数据，如果存在直接读取输出并结束执行
  如果在【pageContext】没有定位成功，到【request】定位共享数据，如果存在直接读取输出并结束执行
  如果在【request】没有定位成功，到【session】定位共享数据，如果存在直接读取输出并结束执行
  如果在【session】没有定位成功，到【application】定位共享数据，如果存在直接读取输出并结束执行
  如果在【application】没有定位成功，返回null

  pageContext---&gt;request---&gt;session---&gt;application
</code></pre>
<p> 4.存在隐患：</p>
<pre><code>    容易降低程序执行速度【南辕北辙】
    容易导致数据定位错误
</code></pre>
<p> 5.应用场景：<br>        设计目的，就是简化从pageContext读取共享数据并输出难度</p>
<p> 6.EL表达式简化版尽管存在很多隐患，但是在实际开发过程中，开发人员为了节省时间，一般都使用<br>   简化版，拒绝使用标准版</p>
<h5 id="五、EL表达式—–支持运算表达式"><a href="#五、EL表达式—–支持运算表达式" class="headerlink" title="五、EL表达式—–支持运算表达式"></a>五、EL表达式—–支持运算表达式</h5><p> 1.前提：在JSP文件有时需要将读取共享数据进行一番运算之后，将运算结果写入到响应体</p>
<p> 2.运算表达式:</p>
<pre><code>    1) 数学运算

    2) 关系运算:  &gt;   &gt;=   ==   &lt;   &lt;=   !=

                           gt   ge   eq   lt   le   !=               【gt = greater than     lt = less than】

    3)逻辑运算：  &amp;&amp;   ||    ！
</code></pre>
<h5 id="六、EL表达式提供内置对象【用得少，一般都在Servlet中使用】"><a href="#六、EL表达式提供内置对象【用得少，一般都在Servlet中使用】" class="headerlink" title="六、EL表达式提供内置对象【用得少，一般都在Servlet中使用】"></a>六、EL表达式提供内置对象【用得少，一般都在Servlet中使用】</h5><pre><code>1.命令格式：$&#123;param.请求参数名&#125;

2.命令作用：通过请求对象读取当前请求包中请求参数内容，并将请求参数内容写入到响应体

3.代替命令：index.jsp
</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">发送请求：http:&#x2F;&#x2F;localhost:8080&#x2F;myWeb&#x2F;index_1.jsp?userName&#x3D;mike&amp;password&#x3D;123</span><br><span class="line"></span><br><span class="line">来访者姓名:$&#123;param.userName&#125;&lt;br&#x2F;&gt;</span><br><span class="line">来访者密码:$&#123;param.password&#125;</span><br></pre></td></tr></table></figure>

<pre><code>  1.命令格式：$&#123;paramValues.请求参数名[下标]&#125;
  
  2.命令作用：如果浏览器发送的请求参数是[一个请求参数关联多个值]，此时可以通过paramVaues读取请求参数下指定位置的值，并写入到响应体
  
  3.代替命令：此时pageNo请求参数在请求包以数组形式存在，pageNo:[1,2,3]
</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">发送请求：http:&#x2F;&#x2F;localhost:8080&#x2F;myWeb&#x2F;index_2.jsp?deptNo&#x3D;10&amp;deptNo&#x3D;20&amp;deptNo&#x3D;30</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">第一个部门编号:$&#123;paramValues.deptNo[0]&#125;&lt;br&#x2F;&gt;</span><br><span class="line">第二个部门编号:$&#123;paramValues.deptNo[1]&#125;&lt;br&#x2F;&gt;</span><br><span class="line">第三个部门编号:$&#123;paramValues.deptNo[2]&#125;&lt;br&#x2F;&gt;</span><br></pre></td></tr></table></figure>



<h5 id="七、EL表达式中出现的常见异常"><a href="#七、EL表达式中出现的常见异常" class="headerlink" title="七、EL表达式中出现的常见异常:"></a>七、EL表达式中出现的常见异常:</h5><pre><code> javax.el.PropertyNotFoundException:在对象中没有找到指定属性【sname属性写成了name属性就会报这个错】
</code></pre>
<h5 id="八、EL表达式禁用"><a href="#八、EL表达式禁用" class="headerlink" title="八、EL表达式禁用"></a>八、EL表达式禁用</h5><p>在当前JSP文件中禁用EL表达式</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page isELIgnored=<span class="string">&quot;true&quot;</span> %&gt; 表示是否禁用EL语言。TRUE表示禁止；FALSE表示不禁止</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/14/Mybatis+Spring+SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZYK的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/14/Mybatis+Spring+SpringMVC/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-14T11:59:44+08:00">
                2021-03-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Mybatis：持久层框架"><a href="#Mybatis：持久层框架" class="headerlink" title="Mybatis：持久层框架"></a>Mybatis：持久层框架</h1><h3 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h3><h5 id="三层架构"><a href="#三层架构" class="headerlink" title="三层架构"></a>三层架构</h5><p>界面层： 和用户打交道的， 接收用户的请求参数， 显示处理结果的。（jsp ，html ，servlet）</p>
<p>业务逻辑层： 接收了界面层传递的数据，计算逻辑，调用数据库，获取数据</p>
<p>数据访问层： 就是访问数据库， 执行对数据的查询，修改，删除等等的。</p>
<h5 id="三层对应的包"><a href="#三层对应的包" class="headerlink" title="三层对应的包"></a>三层对应的包</h5><p>界面层： controller包 （servlet）</p>
<p>业务逻辑层： service包（XXXService类）</p>
<p>数据访问层： dao包（XXXDao类）     </p>
<p>还有一个实体类所在的包：Entity包</p>
<h5 id="三层中类的交互"><a href="#三层中类的交互" class="headerlink" title="三层中类的交互"></a>三层中类的交互</h5><p>用户使用界面层–&gt; 业务逻辑层—&gt;数据访问层（持久层）–&gt;数据库（mysql）</p>
<h5 id="三层对应的处理框架"><a href="#三层对应的处理框架" class="headerlink" title="三层对应的处理框架"></a>三层对应的处理框架</h5><p>界面层—servlet—springmvc（框架）</p>
<p>业务逻辑层—service类–spring（框架）</p>
<p>数据访问层—dao类–mybatis（框架）</p>
<h5 id="总结：Mybatis到底是个啥？"><a href="#总结：Mybatis到底是个啥？" class="headerlink" title="总结：Mybatis到底是个啥？"></a>总结：Mybatis到底是个啥？</h5><p>mybatis是一个sql映射框架，提供的数据库的操作能力。增强的JDBC,使用mybatis让开发人员集中精神写sql就可以了，不必关心Connection,Statement,ResultSet的创建，销毁，sql的执行。 </p>
<p><strong>entity.Student.java：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, email=&#x27;&quot;</span> + email + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>dao.StudentDao.java：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.entity.Student;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentDao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">selectStudents</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>dao.StudentDao.xml：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.bjpowernode.dao.StudentDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudents&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.bjpowernode.entity.Student&quot;</span>&gt;</span></span><br><span class="line">        select id,name,email,age from student order by id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br><span class="line">namespace：表示此映射下面语句的对应方法都在com.bjpowernode.dao.StudentDao这个接口中</span><br><span class="line">select标签：表示查询操作</span><br><span class="line">id属性：表示接口中对应sql语句的那个方法名称，即public List<span class="tag">&lt;<span class="name">Student</span>&gt;</span> selectStudents()</span><br><span class="line">resultType：表示sql语句执行后得到的java对象对应的是com.bjpowernode.entity.Student</span><br></pre></td></tr></table></figure>

<p><strong>resources.mybatis.xml：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.bjpowernode<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mybatis-demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- FIXME change it to the project&#x27;s website --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.example.com<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--mybatis依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--mysql驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span><span class="comment">&lt;!--所在的目录--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">includes</span>&gt;</span><span class="comment">&lt;!--包括目录下的.properties,.xml文件都会扫描到--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="什么是dao？"><a href="#什么是dao？" class="headerlink" title="什么是dao？"></a>什么是dao？</h5><p>Data Access Object 数据访问对象接口</p>
<p>​    dao包就是执行对数据的操作而存在</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/22/53cbd8a1b201f6a693da3d57d7346945-image-20210222221818774-acbbad.png" alt="image-20210222221818774"></p>
<h3 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h3><h5 id="主要类的介绍"><a href="#主要类的介绍" class="headerlink" title="主要类的介绍"></a>主要类的介绍</h5><h5 id="1）Resources："><a href="#1）Resources：" class="headerlink" title="1）Resources："></a>1）Resources：</h5><p>mybatis中的一个类， 负责读取主配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">InputStream in = Resources.getResourceAsStream(<span class="string">&quot;mybatis.xml&quot;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="2）SqlSessionFactoryBuilder"><a href="#2）SqlSessionFactoryBuilder" class="headerlink" title="2）SqlSessionFactoryBuilder"></a>2）SqlSessionFactoryBuilder</h5><p>创建SqlSessionFactory对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SqlSessionFactoryBuilder builder  = <span class="keyword">new</span> SqlSessionFactoryBuilder();</span><br></pre></td></tr></table></figure>

<h5 id="3）SqlSessionFactory"><a href="#3）SqlSessionFactory" class="headerlink" title="3）SqlSessionFactory"></a>3）SqlSessionFactory</h5><p> 重量级对象， 程序创建一个对象耗时比较长，使用资源比较多。在整个项目中，有一个就够用了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//创建SqlSessionFactory对象</span></span><br><span class="line">   SqlSessionFactory factory = builder.build(in);</span><br><span class="line"></span><br><span class="line">SqlSessionFactory:接口,接口实现类:DefaultSqlSessionFactory</span><br><span class="line">SqlSessionFactory作用:获取SqlSession对象。</span><br><span class="line">       </span><br><span class="line">SqlSession sqlSession = factory.openSession();</span><br></pre></td></tr></table></figure>

<p>openSession()方法说明：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">openSession() ：无参数的， 获取是非自动提交事务的SqlSession对象</span><br><span class="line"></span><br><span class="line">openSession(<span class="keyword">true</span>/<span class="keyword">false</span>): openSession(<span class="keyword">true</span>)   自动提交事务的SqlSession</span><br><span class="line">    				     openSession(<span class="keyword">false</span>)  非自动提交事务的SqlSession</span><br></pre></td></tr></table></figure>

<h5 id="4）SqlSession"><a href="#4）SqlSession" class="headerlink" title="4）SqlSession"></a>4）SqlSession</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   SqlSession接口：定义了操作数据的方法，例如selectOne()，selectList()，insert()，update()，delete()，commit()，rollback()</span><br><span class="line">   SqlSession接口的实现类DefaultSqlSession</span><br><span class="line"><span class="comment">//使用要求：SqlSession对象不是线程安全的，需要在方法内部使用，在执行sql语句之前，使用openSession()获取SqlSession对象。</span></span><br><span class="line">       </span><br><span class="line">   在执行完sql语句后，需要关闭它，执行SqlSession.close(). 这样能保证他的使用是线程安全的。</span><br></pre></td></tr></table></figure>



<h3 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h3><p>动态代理：使用SqlSession.getMapper(dao接口.class) 获取这个dao接口的对象</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/27/ad5e0563bb315a1af45ae199e9316e90-image-20210227132229859-46e548.png" alt="image-20210227132229859"></p>
<p>传入参数： 从java代码中把数据传入到mapper文件的sql语句中。</p>
<h5 id="1）parameterType-：-写在mapper文件中的-一个属性。-表示dao接口中方法的参数的数据类型。"><a href="#1）parameterType-：-写在mapper文件中的-一个属性。-表示dao接口中方法的参数的数据类型。" class="headerlink" title="1）parameterType ： 写在mapper文件中的 一个属性。 表示dao接口中方法的参数的数据类型。"></a>1）parameterType ： 写在mapper文件中的 一个属性。 表示dao接口中方法的参数的数据类型。</h5><p>​    例如StudentDao接口</p>
<p>​    public Student  selectStudentById(Integer id) </p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/27/3bf7f0d6a819c2046b8d902d26bc900f-image-20210227123956665-aa5fc9.png" alt="image-20210227123956665"></p>
<h5 id="2-一个简单类型的参数"><a href="#2-一个简单类型的参数" class="headerlink" title="2) 一个简单类型的参数"></a>2) 一个简单类型的参数</h5><p>简单类型： mybatis把java的基本数据类型和String都叫简单类型。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在mapper文件获取简单类型的一个参数的值，使用 #&#123;任意字符&#125;</span><br><span class="line"></span><br><span class="line">接口文件：<span class="function"><span class="keyword">public</span> Student  <span class="title">selectStudentById</span><span class="params">(Integer id)</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line">接口Dao（mapper）文件:select id,name, email,age from student where id=#&#123;studentId&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-多个参数，使用-Param命名参数"><a href="#3-多个参数，使用-Param命名参数" class="headerlink" title="3) 多个参数，使用@Param命名参数"></a>3) 多个参数，使用@Param命名参数</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">接口文件： </span><br><span class="line">  <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">selectMulitParam</span><span class="params">(<span class="meta">@Param(&quot;myname&quot;)</span> String name, <span class="meta">@Param(&quot;myage&quot;)</span> Integer age)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">接口Dao（mapper）文件：</span></span><br><span class="line"><span class="function">    &lt;select&gt;</span></span><br><span class="line">		select * from student where name=#&#123;myname&#125; or age=#&#123;myage&#125;</span><br><span class="line">	&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-多个参数，使用java对象"><a href="#4-多个参数，使用java对象" class="headerlink" title="4) 多个参数，使用java对象"></a>4) 多个参数，使用java对象</h5><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/27/172b1485979a59e606041b62894fa46d-image-20210227125746112-a6a891.png" alt="image-20210227125746112"></p>
<h5 id="5）作为了解：按位置传参、使用map传参"><a href="#5）作为了解：按位置传参、使用map传参" class="headerlink" title="5）作为了解：按位置传参、使用map传参"></a>5）作为了解：按位置传参、使用map传参</h5><h5 id="6）-和-，-是占位符，-是字符串替代"><a href="#6）-和-，-是占位符，-是字符串替代" class="headerlink" title="6） # 和  $，#是占位符，$是字符串替代"></a>6） # 和  $，#是占位符，$是字符串替代</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select id,name, email,age from student where id=#&#123;studentId&#125;的结果： </span><br><span class="line">	select id,name, email,age from student where id=? </span><br><span class="line">	</span><br><span class="line">select id,name, email,age from student where id=$&#123;studentId&#125;的结果：</span><br><span class="line">	select id,name, email,age from student where id=<span class="number">1001</span></span><br></pre></td></tr></table></figure>

<p>  String sql=”select id,name, email,age from student where id=” + “1001”;<br>  使用的Statement对象执行sql， 效率比PreparedStatement低。</p>
<p>  $:可以替换表名或者列名， 你能确定数据是安全的，可以使用$，但$存在sql注入的危险，不建议使用。</p>
<h5 id="和-的区别（最好使用-，作为占位符？出现在sql语句中，线程安全效率高）"><a href="#和-的区别（最好使用-，作为占位符？出现在sql语句中，线程安全效率高）" class="headerlink" title="#和$的区别（最好使用#，作为占位符？出现在sql语句中，线程安全效率高）"></a>#和$的区别（最好使用#，作为占位符？出现在sql语句中，线程安全效率高）</h5><h5 id="类比于-好似PreparedStatement类比于Statement，-比-要好"><a href="#类比于-好似PreparedStatement类比于Statement，-比-要好" class="headerlink" title="#类比于$好似PreparedStatement类比于Statement，#比$要好"></a>#类比于$好似PreparedStatement类比于Statement，#比$要好</h5><ol>
<li>#使用 ？在sql语句中做站位的， 使用PreparedStatement执行sql，效率高</li>
<li>#能够避免sql注入，更安全。</li>
<li>$不使用占位符，是字符串连接方式，使用Statement对象执行sql，效率低</li>
<li>$有sql注入的风险，缺乏安全性。</li>
<li>$:可以替换表名或者列名</li>
</ol>
<h5 id="mybatis的输出结果"><a href="#mybatis的输出结果" class="headerlink" title="mybatis的输出结果"></a>mybatis的输出结果</h5><p>mybatis执行了sql语句，得到java对象。</p>
<h5 id="1）resultType结果类型，-指sql语句执行完毕后，-数据转为的java对象，-java类型是任意的。"><a href="#1）resultType结果类型，-指sql语句执行完毕后，-数据转为的java对象，-java类型是任意的。" class="headerlink" title="1）resultType结果类型， 指sql语句执行完毕后， 数据转为的java对象， java类型是任意的。"></a>1）resultType结果类型， 指sql语句执行完毕后， 数据转为的java对象， java类型是任意的。</h5><p>   resultType结果类型的它值 1. 类型的全限定名称   2. 类型的别名， 例如 java.lang.Integer别名是int</p>
<p>   处理方式：</p>
<ol>
<li>mybatis执行sql语句， 然后mybatis调用类的无参数构造方法，创建对象。<pre><code>     2. mybatis把ResultSet指定列值付给同名的属性。
</code></pre>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id&#x3D;&quot;selectMultiPosition&quot; resultType&#x3D;&quot;com.bjpowernode.domain.Student&quot;&gt;</span><br><span class="line">  select id,name, email,age from student</span><br><span class="line">&lt;&#x2F;select&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>定义自定义类型的别名（不建议使用，推荐使用全限定名称）<br>  1）在mybatis主配置文件中定义，使<typeAlias>定义别名<br>  2）可以在resultType中使用自定义别名</li>
</ol>
<h5 id="3）resultMap-结果映射，-指定列名和java对象的属性对应关系。"><a href="#3）resultMap-结果映射，-指定列名和java对象的属性对应关系。" class="headerlink" title="3）resultMap:结果映射， 指定列名和java对象的属性对应关系。"></a>3）resultMap:结果映射， 指定列名和java对象的属性对应关系。</h5><p>​        1）你自定义列值赋值给哪个属性<br>​        2）当你的列名和属性名不一样时，一定使用resultMap</p>
<p>resultMap和resultType不要一起用，二选一</p>
<h3 id="第四章：动态sql"><a href="#第四章：动态sql" class="headerlink" title="第四章：动态sql"></a>第四章：动态sql</h3><p> 动态sql: 根据条件获取到不同的sql语句，使用mybatis的标签，例如if、where、foreach等。<br>           主要是where部分发生变化。</p>
<p> 动态sql的实现，使用的是mybatis提供的标签， <if> ,<where>,<foreach></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1)</span><br><span class="line"> 	&lt;if&gt;是判断条件的，</span><br><span class="line">		语法&lt;if test&#x3D;&quot;判断java对象的属性值&quot;&gt;</span><br><span class="line">            部分sql语句</span><br><span class="line">	&lt;&#x2F;if&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/27/4b11b903e787b3626a8b36304e40beea-image-20210227143650201-fe641e.png" alt="image-20210227143650201"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2)</span><br><span class="line">	&lt;where&gt; 用来包含多个&lt;if&gt;的,当多个if有一个成立的,&lt;where&gt;会自动增加一个where关键字，并去掉 if中多余的and,or等。</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/27/234374fa13ca930314a6a37576b0a08c-image-20210227162705279-da0512.png" alt="image-20210227162705279"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">3）</span><br><span class="line"> 	&lt;foreach&gt; 循环java中的数组，list集合的。 主要用在sql的in语句中。学生id是 1001,1002,1003的三个学生</span><br><span class="line"> 	</span><br><span class="line"> 	使用foreach标签：</span><br><span class="line">&lt;foreach collection&#x3D;&quot;&quot; item&#x3D;&quot;&quot; open&#x3D;&quot;&quot; close&#x3D;&quot;&quot; separator&#x3D;&quot;&quot;&gt;</span><br><span class="line">         #&#123;xxx&#125;</span><br><span class="line">&lt;&#x2F;foreach&gt;</span><br><span class="line">collection:表示接口中的方法参数的类型， 如果是数组使用array , 如果是list集合使用list</span><br><span class="line">item:自定义的，表示数组和集合成员的变量</span><br><span class="line">open:循环开始是的字符</span><br><span class="line">close:循环结束时的字符</span><br><span class="line">separator:集合成员之间的分隔符</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4）</span><br><span class="line">sql代码片段，就是复用一些语法给sql语句起id别名，使用include标签引用别名，以此使用sql语句占据制定位置</span><br><span class="line">	步骤</span><br><span class="line">1.先定义 &lt;sql id&#x3D;&quot;自定义名称唯一&quot;&gt;  sql语句， 表名，字段等 &lt;&#x2F;sql&gt;</span><br><span class="line">2.再使用， &lt;include refid&#x3D;&quot;id的值&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>



<h3 id="第五章：mybatis的setting文件配置"><a href="#第五章：mybatis的setting文件配置" class="headerlink" title="第五章：mybatis的setting文件配置"></a>第五章：mybatis的setting文件配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;environments&gt;标签内部的&lt;transactionManager&gt;标签：mybatis提交事务、回滚事务的方式</span><br><span class="line"></span><br><span class="line">&lt;dataSource&gt;标签，表示数据源，表示Connection对象的；</span><br><span class="line">		type：指定数据源的类型</span><br><span class="line">		1）POOLED：使用连接池，mybatis会创建PooledDataSource类</span><br><span class="line">		2）UPOOLED：不使用连接池，每次执行sql语句，先创建连接，执行sql，再关闭连接</span><br><span class="line">			mybatis会创建一个UnPooledDataSource，管理Connection对象的使用</span><br></pre></td></tr></table></figure>

<ol>
<li>数据库的属性配置文件： 把数据库连接信息放到一个单独的文件中。 和mybatis主配置文件分开。<br>目的是便于修改，保存，处理多个数据库的信息。</li>
</ol>
<pre><code>1）在resources目录中定义一个属性配置文件， 
 
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">xxxx.properties ,例如 jdbc.properties</span><br><span class="line">   在属性配置文件中， 定义数据，格式是 key&#x3D;value </span><br><span class="line">	  key： 一般使用 . 做多级目录的。</span><br><span class="line">	  例如 jdbc.mysql.driver    , jdbc.driver, mydriver</span><br><span class="line">	  jdbc.driver&#x3D;com.mysql.jdbc.Driver</span><br><span class="line">	  jdbc.url&#x3D;jdbc:mysql&#x2F;&#x2F;.....</span><br><span class="line">	  jdbc.username&#x3D;root</span><br><span class="line">	  jdbc.password&#x3D;123456</span><br></pre></td></tr></table></figure>

2）在mybatis的主配置文件，使用&lt;property&gt; 指定文件的位置
     在需要使用值的地方， $&#123;key&#125; 
</code></pre>
<p>2.mapper文件，使用package指定路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--第二种方式： 使用包名</span></span><br><span class="line"><span class="comment">        name: xml文件（mapper文件）所在的包名, 这个包中所有xml文件一次都能加载给mybatis</span></span><br><span class="line"><span class="comment">        使用package的要求：</span></span><br><span class="line"><span class="comment">         1. mapper文件名称需要和接口名称一样，区分大小写的一样</span></span><br><span class="line"><span class="comment">         2. mapper文件和dao接口需要在同一目录</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.bjpowernode.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="第六章：PageHelper"><a href="#第六章：PageHelper" class="headerlink" title="第六章：PageHelper"></a>第六章：PageHelper</h3><p> PageHelper做数据分页的。</p>
<p>每次显示一页，每页显示xx行</p>
<h1 id="Spring：IOC控制反转和AOP面向切面"><a href="#Spring：IOC控制反转和AOP面向切面" class="headerlink" title="Spring：IOC控制反转和AOP面向切面"></a>Spring：IOC控制反转和AOP面向切面</h1><h3 id="第一章：Spring的第一个核心功能：IoC，控制反转"><a href="#第一章：Spring的第一个核心功能：IoC，控制反转" class="headerlink" title="第一章：Spring的第一个核心功能：IoC，控制反转"></a>第一章：Spring的第一个核心功能：IoC，控制反转</h3><ul>
<li>控制反转ioc是一种设计思想，di(依赖注入)是实现ioc的一种方法</li>
<li>控制反转是一种通过描述xml或注解并通过第三方去生产或获取特定对象的方式。</li>
</ul>
<ol>
<li>什么是IoC：把对象的创建，赋值，管理工作都交给代码之外的容器实现，对象的创建是由其它外部资源完成。</li>
<li>控制是什么意思：创建对象，对象的属性赋值，对象之间的关系管理。</li>
<li>反转是什么意思：把原来的开发人员管理，创建对象的权限转移给代码之外的容器实现。 由容器代替开发人员管理对象，创建对象，给属性赋值。</li>
<li>正转是什么意思：由开发人员在代码中，使用new 构造方法创建对象，开发人员主动管理对象。</li>
</ol>
<h5 id="为什么要使用-ioc-？"><a href="#为什么要使用-ioc-？" class="headerlink" title="为什么要使用 ioc ？"></a>为什么要使用 ioc ？</h5><pre><code>目的就是减少对代码的改动，也能实现不同的功能，实现解耦合。 
</code></pre>
<h5 id="IoC的技术实现-：DI（依赖注入）"><a href="#IoC的技术实现-：DI（依赖注入）" class="headerlink" title="IoC的技术实现 ：DI（依赖注入）"></a>IoC的技术实现 ：DI（依赖注入）</h5><ol>
<li>DI （Dependency Injection），是ioc的技术实现，只需要在程序中提供要使用的对象名称就可以， 至于对象如何在容器中创建，赋值，查找都由容器内部实现。</li>
<li>spring使用di实现了ioc的功能，spring底层创建对象，使用的是反射机制。</li>
<li>spring是一个容器，管理对象，给属性赋值，底层是反射创建对象。</li>
</ol>
<h5 id="spring创建对象的时机：创建spring容器时，会创建bean-xml文件中的所有对象"><a href="#spring创建对象的时机：创建spring容器时，会创建bean-xml文件中的所有对象" class="headerlink" title="spring创建对象的时机：创建spring容器时，会创建bean.xml文件中的所有对象"></a>spring创建对象的时机：创建spring容器时，会创建bean.xml文件中的所有对象</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">即此条语句执行时：</span><br><span class="line">	ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">&quot;bean.xml&quot;</span>);</span><br></pre></td></tr></table></figure>



<ol>
<li>spring-conetxt 和 spring-webmvc是spring中的两个模块</li>
<li>spring-context：是ioc功能的，创建对象的。</li>
<li>spring-webmvc做web开发使用的， 是servlet的升级。 </li>
<li>spring-webmvc中也会用到spring-context中创建对象的功能的。</li>
</ol>
<p><strong>bean.xml：</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/28/790b66a647ec08ba75d6ac7579fe9717-image-20210228154100452-855b8e.png" alt="image-20210228154100452"></p>
<p><strong>MyTest.java：</strong>如何使用spring框架</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/02/28/ca3a6acd7e4592f79f8798f02209c9f9-image-20210228154530638-112504.png" alt="image-20210228154530638"></p>
<h5 id="基于XML的DI"><a href="#基于XML的DI" class="headerlink" title="基于XML的DI"></a>基于XML的DI</h5><p>1、set注入（设值注入）：spring去寻找类的set方法，并调用、完成赋值，我们只需要在bean.xml文件中写如下赋值代码即可：（一个property给一个属性赋值）</p>
<p>spring去找setName()、setAge()、setEmail()等set方法，不管有没有对应的属性，只要有这个方法就会调用并执行。</p>
<p>简单类型使用value = “”， 引用类型（即对象）使用ref = “”</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/22/1c33567dd49af4756d2bc3b72143e02e-image-20201222130232064-d63d9a.png" alt="image-20201222130232064"></p>
<p>2、构造注入(需要手动实现带参的构造方法)：spring调用类的有参构造方法，在构造方法中为属性赋值</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--用name属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span> = <span class="string">&quot;myName&quot;</span> <span class="attr">value</span> = <span class="string">&quot;张三&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span> = <span class="string">&quot;myAge&quot;</span> <span class="attr">value</span> = <span class="string">&quot;22&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--用index属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span> = <span class="string">&quot;0&quot;</span> <span class="attr">value</span> = <span class="string">&quot;李四&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span> = <span class="string">&quot;1&quot;</span> <span class="attr">value</span> = <span class="string">&quot;18&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--不推荐使用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span> = <span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span> = <span class="string">&quot;李四&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="数组、List、Map、Set、null、properties的注入"><a href="#数组、List、Map、Set、null、properties的注入" class="headerlink" title="数组、List、Map、Set、null、properties的注入"></a>数组、List、Map、Set、null、properties的注入</h5><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/05/de09a574fb2a6431310b98539cc4ef9d-image-20210305181412428-c417ca.png" alt="image-20210305181412428"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/05/960a5079e967f04208685dcdfc707199-image-20210305181146251-2909ce.png" alt="image-20210305181146251"></p>
<p>p命名和c命名空间注入，p代表properties，c代表constructor</p>
<p>在beans.xml文件头加入p或者c约束语句即可使用</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/05/b363ad59d9397f605a3e77db1ef68cd8-image-20210305181938914-95d2c3.png" alt="image-20210305181938914"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/05/aa3153c6029bdc365c0fae9f6de1d48a-image-20210305182043957-4eefd7.png" alt="image-20210305182043957"></p>
<h5 id="单例模式和原型模式"><a href="#单例模式和原型模式" class="headerlink" title="单例模式和原型模式"></a>单例模式和原型模式</h5><ul>
<li>单例模式，同样的bean是一个bean，hashCode值相同</li>
<li>原型模式，同样的bean是不同的对象，一个bean对应一个独有的hashCode值</li>
</ul>
<h5 id="bean的自动装配：引用类型的自动注入（只对引用类型（对象）有用），不使用ref，使用byName和byType"><a href="#bean的自动装配：引用类型的自动注入（只对引用类型（对象）有用），不使用ref，使用byName和byType" class="headerlink" title="bean的自动装配：引用类型的自动注入（只对引用类型（对象）有用），不使用ref，使用byName和byType"></a>bean的自动装配：引用类型的自动注入（只对引用类型（对象）有用），不使用ref，使用byName和byType</h5><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/05/292e98b1de0a36fcedaf22a2c9eadb98-image-20210305183802457-34630b.png" alt="image-20210305183802457"></p>
<p>1）byName，按名称注入（通过id属性匹配），java类中引用类型的属性名和spring容器中<bean>的id名称一样，且数据类型是一致的，这样的容器中的bean，spring能够赋值给引用类型。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;cat&quot;</span> <span class="attr">class</span> = <span class="string">&quot;com.kuang.pojo.Cat&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;people&quot;</span> <span class="attr">class</span> = <span class="string">&quot;com.kuang.pojo.People&quot;</span> <span class="attr">autowire</span> = <span class="string">&quot;byName&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;name&quot;</span> <span class="attr">value</span> = <span class="string">&quot;狂神&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>    </span><br></pre></td></tr></table></figure>

<p>2）byType，按类型注入（通过class属性匹配），java类中引用类型的数据类型和spring容器中<bean>的class属性是同源关系的，这样的bean能够赋值给引用类型（同源：同源就是一类的意思。当出现多个匹配结果时，报错，符合的匹配类型只能有一个）</p>
<ol>
<li> java类中引用类型的数据类型和bean的class的值是一样的</li>
<li> java类中引用类型的数据类型和bean的class的值是父子类的关系</li>
<li> java类中引用类型的数据类型和bean的class的值是接口和实现类的关系</li>
</ol>
<h5 id="项目中有多个模块时，一个模块一个xml配置文件"><a href="#项目中有多个模块时，一个模块一个xml配置文件" class="headerlink" title="项目中有多个模块时，一个模块一个xml配置文件"></a>项目中有多个模块时，一个模块一个xml配置文件</h5><ol>
<li>每个文件的大小比一个文件要小很多。效率高</li>
<li>避免多人竞争带来的冲突。</li>
</ol>
<p>多文件的分配方式：</p>
<ol>
<li>按功能模块，一个模块一个配置文件</li>
<li>按类的功能，数据库相关一个配置文件， 做事务一个配置文件， 做service的一个配置文件</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/22/c0166a0cc80c5ab02ef6382825b819bb-image-20201222193608569-025aa0.png" alt="image-20201222193608569"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  在total.xml中写入如下语句    使用通配符*表示任意的字符，注意：主xml配置文件名称不能包含在通配符的范围内（不能叫做spring-total.xml，只能叫做total.xml)  否则会出现错误 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span> = <span class="string">&quot;classpath:spring-*.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="基于注解的DI：-通过注解完成java对象创建，属性赋值。"><a href="#基于注解的DI：-通过注解完成java对象创建，属性赋值。" class="headerlink" title="基于注解的DI： 通过注解完成java对象创建，属性赋值。"></a>基于注解的DI： 通过注解完成java对象创建，属性赋值。</h5><p>使用注解的步骤：</p>
<ol>
<li>加入maven的依赖spring-context ，在加入spring-context的同时， 间接加入spring-aop的依赖。使用注解必须使用spring-aop依赖</li>
<li><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/05/600832e433bc5e4ff1c3f36d343a5fab-image-20210305184622109-a10751.png" alt="image-20210305184622109"></li>
<li>在类中加入spring的注解（多个不同功能的注解）</li>
<li>在spring的配置文件中，加入一个组件扫描器的标签，说明注解在你的项目中的位置</li>
</ol>
<h5 id="需要学习的注解："><a href="#需要学习的注解：" class="headerlink" title="需要学习的注解："></a>需要学习的注解：</h5><p><strong>@Autowired</strong>    给引用类型赋值（对象）。 通过byType实现。 使用方法：直接在属性上使用，或者在set方法上使用</p>
<p><strong>@Resource</strong>    功能和@Autowired相似，用来给引用类型赋值。默认byName，找不到就byType。与其他来自spring框架的注解不同，它来自jdk</p>
<p>。默认按照byName找，找不到再用byType找</p>
<p><strong>@Qualifier</strong> 该注解是用来消除依赖注入冲突的。在Autowired多个bean无法准确选择时使用</p>
<p><strong>@Value</strong>    给简单类型的属性赋值</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/05/c599317ba0ffd59149b56452afb2a8c8-image-20210305221323385-3a036f.png" alt="image-20210305221323385"></p>
<p><strong>@Component</strong>   组件，用来创建bean的注解，写在类的上面</p>
<ul>
<li><strong>@Repository</strong>   也是用来创建对象，持久层使用，创建dao对象访问数据库</li>
<li><strong>@Service</strong>         也是用来创建对象，业务层使用，创建service对象做业务处理</li>
<li><strong>@Controller</strong>    也是用来创建对象，控制层使用，创建控制器对象，接受并处理请求</li>
</ul>
<p>以上三个注解的使用语法和**@Component**基本一样，但这三个注解有额外的功能，用来分层</p>
<h5 id="指定多个包的三种方式："><a href="#指定多个包的三种方式：" class="headerlink" title="指定多个包的三种方式："></a>指定多个包的三种方式：</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 使用多个组件扫描器   <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span> = <span class="string">&quot;com.kuang.pojo&quot;</span> /&gt;</span></span><br><span class="line">2. 使用分隔符把多个包名分开（；或者，）</span><br><span class="line">3. 指定父包   <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span> = <span class="string">&quot;com.bjpowernode&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="注解和XML配置文件如何选择？（在项目开发中，一般是注解为主）"><a href="#注解和XML配置文件如何选择？（在项目开发中，一般是注解为主）" class="headerlink" title="注解和XML配置文件如何选择？（在项目开发中，一般是注解为主）"></a>注解和XML配置文件如何选择？（在项目开发中，一般是注解为主）</h5><p>1）经常修改代码属性值的使用XML配置文件</p>
<p>2）不经常修改的使用注解</p>
<p>​    </p>
<h3 id="第二章：AOP（Aspect-Orient-Programming）面向切面编程"><a href="#第二章：AOP（Aspect-Orient-Programming）面向切面编程" class="headerlink" title="第二章：AOP（Aspect Orient Programming）面向切面编程"></a>第二章：AOP（Aspect Orient Programming）面向切面编程</h3><h5 id="动态代理实现方式："><a href="#动态代理实现方式：" class="headerlink" title="动态代理实现方式："></a>动态代理实现方式：</h5><ol>
<li><p>基于接口——jdk，使用jdk中的Proxy，Method，InvocaitonHandler创建代理对象。jdk动态代理要求目标类必须实现接口。实现类有接口时，用jdk动态代理</p>
</li>
<li><p>基于类——cglib：第三方的工具库，创建代理对象，原理是继承。通过继承目标类，创建代理对象子类。要求目标类不能是final的，方法也不能是final的。实现类没有接口时，用cglib动态代理</p>
</li>
<li><p>字节码实现，javasist</p>
</li>
</ol>
<h5 id="强制使用cglib代理，不使用jdk代理"><a href="#强制使用cglib代理，不使用jdk代理" class="headerlink" title="强制使用cglib代理，不使用jdk代理"></a>强制使用cglib代理，不使用jdk代理</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在applicationContext.xml文件中写入以下代码：</span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> <span class="attr">proxy-target-class</span>=<span class="string">&quot;true /&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="动态代理的作用："><a href="#动态代理的作用：" class="headerlink" title="动态代理的作用："></a>动态代理的作用：</h5><ol>
<li>在目标类源代码不改变的情况下，增加功能。减少代码的重复。专注业务逻辑代码。解耦合，让你的业务功能和日志、事务非业务功能分离。</li>
</ol>
<p><strong>MyIncationHandler.java：</strong>  </p>
<pre><code>实现InvocationHandler接口，重写invoke包含doSome/doOther方法和新添加的事务代码
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/23/e4fecc8db6c446be366cbfe68473861d-image-20201223115227585-0e3fc1.png" alt="image-20201223115227585"></p>
<p><strong>MyTest.java</strong>    </p>
<p>利用jdk的proxy代理对象执行</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/23/36f01450e003991bdf0f55e8ea639bb8-image-20201223115241701-706a7a.png" alt="image-20201223115241701"></p>
<h5 id="常用术语"><a href="#常用术语" class="headerlink" title="常用术语"></a>常用术语</h5><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/05/bdd4e79a44133d10081cbd10d35b766a-image-20210305233908372-8f5365.png" alt="image-20210305233908372"></p>
<h5 id="切面有三个关键的要素："><a href="#切面有三个关键的要素：" class="headerlink" title="切面有三个关键的要素："></a>切面有三个关键的要素：</h5><ol>
<li>切面的功能代码，切面用来干什么，aspect</li>
<li>切面的执行位置，使用Pointcut表示切面执行的位置，一个或多个joinpoint的集合</li>
<li>切面的执行时间，使用Advice表示时间，在目标方法之前，还是目标方法之后。</li>
</ol>
<h5 id="aop的实现的两种框架："><a href="#aop的实现的两种框架：" class="headerlink" title="aop的实现的两种框架："></a>aop的实现的两种框架：</h5><ol>
<li><p>spring：spring在内部实现了aop规范，能做aop的工作。spring主要在事务处理时使用aop。我们项目开发很少使用spring的aop实现。 因为spring的aop比较笨重。</p>
</li>
<li><p><strong>aspectJ框架</strong>: 一个开源的专门做aop的框架。spring框架中集成了aspectj框架，通过spring就能使用aspectj的功能。</p>
</li>
</ol>
<h5 id="aspectJ框架实现aop有两种方式："><a href="#aspectJ框架实现aop有两种方式：" class="headerlink" title="aspectJ框架实现aop有两种方式："></a>aspectJ框架实现aop有两种方式：</h5><ul>
<li>使用xml配置文件：配置全局事务</li>
<li>使用注解：我们在项目中要做aop功能，一般都使用注解。aspectj有5个注解</li>
</ul>
<h5 id="学习aspectj框架的使用"><a href="#学习aspectj框架的使用" class="headerlink" title="学习aspectj框架的使用"></a>学习aspectj框架的使用</h5><p>1、切面的执行时间，即Advice(通知/增强)。在aspectj框架中使用注解表示，也可以使用xml配置文件中的标签</p>
<ul>
<li>@Before，在目标方法之前执行</li>
<li>@AfterReturning，在目标方法之后执行，能够获取到方法的返回值，也可以修改它</li>
<li>@Around，功能最强的注解，在方法前后都可以增加功能，还可以控制目标方法是否执行，或者修改原来方法的执行结果，即返回值</li>
<li>@After，最终通知，在目标方法之后执行，且总是会执行，一般用来做资源清除，类似finally</li>
<li>@AfterThrowing，在发生异常时执行，可以在此写代码发送邮件或者发送短信 </li>
<li>@Pointcut，定义和管理切入点，多个切入点是重复的，可以复用的时候，使用它，把一个方法定义成切入点，其他使用到切入点的地方，value就可以直接使用Pointcut下面的方法名</li>
</ul>
<p>2、使用<strong>切入点表达式</strong>，表示切面执行的位置。</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/23/bb25bb6c402d60a41b362f3e4a270c94-image-20201223180328891-5ca8e4.png" alt="image-20201223180328891"></p>
<h3 id="第三章：mybatis集成spring"><a href="#第三章：mybatis集成spring" class="headerlink" title="第三章：mybatis集成spring"></a>第三章：mybatis集成spring</h3><h5 id="核心技术是：ioc"><a href="#核心技术是：ioc" class="headerlink" title="核心技术是：ioc"></a>核心技术是：ioc</h5><p>因为ioc能创建对象。可以把mybatis框架中的对象交给spring统一创建， 开发人员只需要从spring中获取对象</p>
<p>通过以上的说明，我们需要让spring创建以下对象</p>
<ol>
<li>独立的连接池类的对象， 使用阿里的druid连接池</li>
<li>SqlSessionFactory对象</li>
<li>创建出dao对象</li>
</ol>
<h5 id="mybatis和spring集成的项目结构："><a href="#mybatis和spring集成的项目结构：" class="headerlink" title="mybatis和spring集成的项目结构："></a>mybatis和spring集成的项目结构：</h5><ul>
<li>dao数据访问：StudentDao和StudentDao.xml</li>
<li>domian实体域：Student</li>
<li>service业务层：StudentService接口和StudentServiceImpl实现类</li>
</ul>
<h5 id="步骤："><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h5><ol>
<li>   编写数据源配置</li>
<li>   sqlSessionFactory</li>
<li>   sqlSessionTemplate</li>
<li>   需要给dao接口加实现类</li>
<li>   将dao接口实现类注入spring</li>
<li>   用getBean获取实现类并调方法即可</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/06/c3a338a5b1cc946b739bb163c8745d09-image-20210306162931270-64dca1.png" alt="image-20210306162931270"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/06/f0272d6be2c2e00c49cd91e0773b1f3b-image-20210306164714798-5da3eb.png" alt="image-20210306164714798"></p>
<h5 id="spring的事务处理"><a href="#spring的事务处理" class="headerlink" title="spring的事务处理"></a>spring的事务处理</h5><p>事务：是指多条sql语句的集合。要么都成功，要么都失败。</p>
<p>ACID：原子性、一致性、隔离性、持久性</p>
<p>spring提供一种处理事务的统一模型， 能使用统一步骤、方式，完成多种不同数据库访问技术的事务处理。</p>
<p>使用事务管理器对象，代替你完成commit，rollback。事务管理器是一个接口和他的众多实现类。</p>
<pre><code>  接口：PlatformTransactionManager ，定义了事务重要方法 commit ，rollback。

  实现类：spring把每一种数据库访问技术对应的事务处理类都创建好了。

mybatis访问数据库---spring创建好的是DataSourceTransactionManager
</code></pre>
<h5 id="告诉spring-我们用的是哪种数据库的访问技术"><a href="#告诉spring-我们用的是哪种数据库的访问技术" class="headerlink" title="告诉spring 我们用的是哪种数据库的访问技术"></a>告诉spring 我们用的是哪种数据库的访问技术</h5><p>声明数据库访问技术对于的事务管理器实现类， 在spring的配置文件中使用<bean>声明就可以了</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">例如，你要使用mybatis访问数据库，你应该在xml配置文件中</span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">“xxx</span>&quot; <span class="attr">class</span>=<span class="string">&quot;...DataSourceTransactionManager&quot;</span>&gt;</span> </span><br></pre></td></tr></table></figure>



<h5 id="总结spring的事务"><a href="#总结spring的事务" class="headerlink" title="总结spring的事务"></a>总结spring的事务</h5><p>  1、管理事务的是：事务管理和他的实现类</p>
<p>  2、spring的事务是一个统一模型</p>
<ol>
<li>指定要使用的事务管理器实现类，使用<bean></li>
<li>指定哪些类，哪些方法需要加入事务的功能</li>
<li>指定方法需要的隔离级别，传播行为，超时</li>
</ol>
<p>我们只需要告诉spring，我们项目中的类的信息、方法的名称、方法的事务传播行为。</p>
<h5 id="spring框架中提供的事务处理方案"><a href="#spring框架中提供的事务处理方案" class="headerlink" title="spring框架中提供的事务处理方案"></a>spring框架中提供的事务处理方案</h5><p>1、适合中小项目使用的， 注解方案。</p>
<p>spring框架自己用aop实现给业务方法增加事务的功能，使用@Transactional注解增加事务。@Transactional注解是spring框架自己注解，放在public方法的上面，表示当前方法具有事务。可以给注解的属性赋值，表示具体的隔离级别、传播行为、异常信息等等</p>
<p>2、适合大型项目，有很多的类，方法，需要大量的配置事务，使用aspectj框架功能，在spring配置文件中声明类，方法需要的事务。这种方式业务方法和事务配置完全分离。</p>
<p>================================================================================</p>
<h3 id="第四章：-web项目中怎么使用容器对象。"><a href="#第四章：-web项目中怎么使用容器对象。" class="headerlink" title="第四章： web项目中怎么使用容器对象。"></a>第四章： web项目中怎么使用容器对象。</h3><p>如果不使用监听器，一次刷新就会出现一个spring容器</p>
<p>改进方法：使用监听器ContextLoaderListener</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/24/a01f9862cb8dd86dcac0a91ab40aad23-image-20201224213531444-a98214.png" alt="image-20201224213531444"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/24/bee9df8977ce624d18cef43ec25b15a5-image-20201224213605550-5876ab.png" alt="image-20201224213605550"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/24/ddcfdfb3a17678c5705f60f7f4138f09-image-20201224213622389-f7ef53.png" alt="image-20201224213622389"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/24/47f2a0122cc918064c787caba2f30d26-image-20201224213640436-da8993.png" alt="image-20201224213640436"></p>
<h1 id="SpringMVC：把servlet简化了操作的一个web框架"><a href="#SpringMVC：把servlet简化了操作的一个web框架" class="headerlink" title="SpringMVC：把servlet简化了操作的一个web框架"></a>SpringMVC：把servlet简化了操作的一个web框架</h1><h3 id="MVC三层架构：model、view、controller"><a href="#MVC三层架构：model、view、controller" class="headerlink" title="MVC三层架构：model、view、controller"></a>MVC三层架构：model、view、controller</h3><h3 id="DispatcherServlet，用来统一协调servlet的请求"><a href="#DispatcherServlet，用来统一协调servlet的请求" class="headerlink" title="DispatcherServlet，用来统一协调servlet的请求"></a>DispatcherServlet，用来统一协调servlet的请求</h3><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/08/89758ff7edf9ca1ace0486275800a979-image-20210308163527422-782116.png" alt="image-20210308163527422"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/08/17d2b5a4eec272d41cf00415f6dda512-image-20210308164355206-ab1669.png" alt="image-20210308164355206"></p>
<p><strong>web.xml：</strong>   直接写dispatcherservlet，不需要自己写，并且注意/和/*的区别。</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/08/f0dea54d71b0753f2b0ba000a6690a0e-image-20210308164840665-37372d.png" alt="image-20210308164840665"></p>
<p><strong>resources.springmvc-servlet.xml：</strong>      处理bean的映射、controller的适配、进行view的拼接</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/08/6a3142c6f5f0c8d830e9b0d43c105b79-image-20210308165846166-e3dbd9.png" alt="image-20210308165846166"></p>
<p><strong>com.kuang.controller.HelloController.java：</strong>   使用注解开发</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/08/ac0416e310bae76159106d3cc3b285c6-image-20210308170245833-bf7030.png" alt="image-20210308170245833"></p>
<p>至此，输入localhost：8080/h1即可 显示 ：<strong>Hello，SpringMVCAnnotation</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Controller     这个注解表示被注解的类交个spring容器托管</span><br><span class="line"></span><br><span class="line">@RequestMapping(&quot;&#x2F;test&quot;)    适配jsp页面的名字</span><br></pre></td></tr></table></figure>



<h3 id="Restful风格，-RequestMapping-“-add-a-b-”"><a href="#Restful风格，-RequestMapping-“-add-a-b-”" class="headerlink" title="Restful风格，@RequestMapping(“/add{a}/{b}”)"></a>Restful风格，@RequestMapping(“/add{a}/{b}”)</h3><p>请求地址一样，但是功能可以不同</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/08/ee3f4d2d087db2de497cab4a350f1305-image-20210308183054606-2c3f04.png" alt="image-20210308183054606"></p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/08/5342fbcb542957df5a780e08c8634710-image-20210308183422439-06defc.png" alt="image-20210308183422439"></p>
<h3 id="解决get-post乱码问题"><a href="#解决get-post乱码问题" class="headerlink" title="解决get/post乱码问题"></a>解决get/post乱码问题</h3><p>web.xml中使用spring提供的过滤器filter标签</p>
<h3 id="解决JSON乱码问题，提前配置jackson的使用（在maven-pom-xml中）"><a href="#解决JSON乱码问题，提前配置jackson的使用（在maven-pom-xml中）" class="headerlink" title="解决JSON乱码问题，提前配置jackson的使用（在maven/pom.xml中）"></a>解决JSON乱码问题，提前配置jackson的使用（在maven/pom.xml中）</h3><p>在spring-servlet.xml中写如下配置</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2021/03/08/0f6eb2c4820e1b70b90c5495e4ef1662-image-20210308193542422-f8be17.png" alt="image-20210308193542422"></p>
<h3 id="第三章-SSM整合使用"><a href="#第三章-SSM整合使用" class="headerlink" title="第三章 SSM整合使用"></a>第三章 SSM整合使用</h3><h5 id="WEB-INF文件夹是受保护资源，用户是不能直接访问这个文件夹下的东西的，也就是说，redirect不能访问WEB-INF这个文件夹下面的内容"><a href="#WEB-INF文件夹是受保护资源，用户是不能直接访问这个文件夹下的东西的，也就是说，redirect不能访问WEB-INF这个文件夹下面的内容" class="headerlink" title="WEB-INF文件夹是受保护资源，用户是不能直接访问这个文件夹下的东西的，也就是说，redirect不能访问WEB-INF这个文件夹下面的内容"></a>WEB-INF文件夹是受保护资源，用户是不能直接访问这个文件夹下的东西的，也就是说，redirect不能访问WEB-INF这个文件夹下面的内容</h5><h5 id="springmvc中把异常处理进行了统一："><a href="#springmvc中把异常处理进行了统一：" class="headerlink" title="springmvc中把异常处理进行了统一："></a>springmvc中把异常处理进行了统一：</h5><p>springmvc框架采用的是统一，全局的异常处理。</p>
<p>把controller中的所有异常处理都集中到一个地方。 采用的是aop的思想。把业务逻辑和异常处理代码分开。解耦合。</p>
<p>使用两个注解</p>
<p>1.@ExceptionHandler，写在方法上</p>
<p>2.@ControllerAdvice，写在类上，意为控制器增强，给控制器类增加异常处理功能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">handler.GlobalExceptionHandler：</span><br><span class="line"></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span></span>&#123;</span><br><span class="line">	<span class="comment">//定义方法，处理发生时的异常</span></span><br><span class="line">	<span class="comment">//形参Exception表示Controller中抛出的异常对象</span></span><br><span class="line">	</span><br><span class="line">	<span class="meta">@ExceptionHandler(value=NameException.class)</span>     <span class="comment">// Name的异常匹配这个方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doNameException</span><span class="params">(Exception ex)</span></span>&#123;</span><br><span class="line">		<span class="comment">//处理NameException的异常</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		1.需要把异常记录下来，记录到日志文件中</span></span><br><span class="line"><span class="comment">		2.发送通知，把异常的信息通过邮件，短信发送给相关人员</span></span><br><span class="line"><span class="comment">		3.给用户友好的提示，让用户知道如何解决</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@ExceptionHandler(value=AgeException.class)</span>    <span class="comment">//Age的异常匹配这个方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doAgeException</span><span class="params">(Exception ex)</span></span>&#123;</span><br><span class="line">		<span class="comment">//处理AgeException的异常</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//处理除了Name和Age以外的不知类型的异常              //其他的异常匹配这个方法</span></span><br><span class="line">	<span class="meta">@ExceptionHandler</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ModelAndView <span class="title">doOtherException</span><span class="params">(Exception ex)</span></span>&#123;</span><br><span class="line">		<span class="comment">//处理其他类型的异常</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="拦截器：AOP原理，用于：权限检查，用户登录处理，-记录日志。"><a href="#拦截器：AOP原理，用于：权限检查，用户登录处理，-记录日志。" class="headerlink" title="拦截器：AOP原理，用于：权限检查，用户登录处理， 记录日志。"></a>拦截器：AOP原理，用于：权限检查，用户登录处理， 记录日志。</h3><ul>
<li>boolean  preHandle：预先处理方法，在Controller的doSome()方法执行之前，return true/false</li>
<li>void  postHandle：后处理方法，在Controller的doSome()方法执行之后</li>
<li>void  afterCompletion：最后执行的方法，在视图执行forward之后，一般用来回收资源，必须preHandle返回true才执行</li>
</ul>
<p>拦截器和过滤器类似，功能方向侧重点不同。 </p>
<ul>
<li><p>过滤器是用来过滤器请求参数，设置编码字符集等工作。</p>
</li>
<li><p>拦截器是拦截用户的请求，做请求做判断处理的。</p>
</li>
</ul>
<p>拦截器是全局的，可以对多个Controller做拦截。 一个项目中可以有多个拦截器， 他们在一起拦截用户的请求。</p>
<p>拦截器的使用步骤：</p>
<ol>
<li>定义类实现HandlerInterceptor接口</li>
<li>在springmvc配置文件中，声明拦截器， 让框架知道拦截器的存在。</li>
</ol>
<p>拦截器的执行时间：</p>
<p>  1）在请求处理之前， 也就是controller类中的方法执行之前先被拦截。</p>
<p>  2）在控制器方法执行之后也会执行拦截器。</p>
<p>  3）在请求处理完成后也会执行拦截器。</p>
<p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/28/fbe85b76cad926ad82908618918cd905-image-20201228201020737-53ae7a.png" alt="image-20201228201020737"></p>
<h5 id="多个拦截器的执行顺序（每个拦截器实现不同功能），按照一个贯穿的箭头执行："><a href="#多个拦截器的执行顺序（每个拦截器实现不同功能），按照一个贯穿的箭头执行：" class="headerlink" title="多个拦截器的执行顺序（每个拦截器实现不同功能），按照一个贯穿的箭头执行："></a>多个拦截器的执行顺序（每个拦截器实现不同功能），按照一个贯穿的箭头执行：</h5><p><img src="https://cdn.jsdelivr.net/gh/zyk98/cloudimg@latest/img/2020/12/28/6827d1cebe2556b01d92ab68028e824d-image-20201228222949848-8b5c92.png" alt="image-20201228222949848"></p>
<h5 id="执行顺序"><a href="#执行顺序" class="headerlink" title="执行顺序"></a>执行顺序</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">第一个拦截器preHandle&#x3D;true , 第二个拦截器preHandle&#x3D;true </span><br><span class="line"></span><br><span class="line">111111-拦截器的MyInterceptor的preHandle()</span><br><span class="line">22222-拦截器的MyInterceptor的preHandle()</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;执行MyController中的doSome方法&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">22222-拦截器的MyInterceptor的postHandle()</span><br><span class="line">111111-拦截器的MyInterceptor的postHandle()</span><br><span class="line">22222-拦截器的MyInterceptor的afterCompletion()</span><br><span class="line">111111-拦截器的MyInterceptor的afterCompletion()</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第一个拦截器preHandle&#x3D;true , 第二个拦截器preHandle&#x3D;false：</span><br><span class="line"></span><br><span class="line">111111-拦截器的MyInterceptor的preHandle()</span><br><span class="line">22222-拦截器的MyInterceptor的preHandle()    到此被拦截器2截断，doSome方法不执行</span><br><span class="line">111111-拦截器的MyInterceptor的afterCompletion()</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">第一个拦截器preHandle&#x3D;false , 第二个拦截器preHandle&#x3D;true|false：</span><br><span class="line"></span><br><span class="line">111111-拦截器的MyInterceptor的preHandle()  到此被拦截器1截断，后面所有拦截器和方法都不执行</span><br></pre></td></tr></table></figure>



<h5 id="拦截器和过滤器的区别："><a href="#拦截器和过滤器的区别：" class="headerlink" title="拦截器和过滤器的区别："></a>拦截器和过滤器的区别：</h5><p>1.过滤器是servlet中的对象。拦截器是框架中的对象</p>
<p>2.过滤器实现Filter接口。拦截器实现HandlerInterceptor接口</p>
<p>3.过滤器是用来设置request，response的参数，属性的，侧重对数据过滤的。拦截器是用来验证请求的，能截断请求。</p>
<p>4.过滤器是在拦截器之前先执行的。</p>
<p>5.过滤器是tomcat服务器创建的对象。拦截器是springmvc容器中创建的对象</p>
<p>6.过滤器是一个执行时间点。拦截器有三个执行时间点</p>
<p>7.过滤器可以处理jsp，js，html等等。拦截器是侧重拦截对Controller的对象。</p>
<p>8.拦截器拦截普通类方法执行。过滤器过滤servlet请求响应。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/14/Maven+%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZYK的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2021/03/14/Maven+%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/" itemprop="url">未命名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-14T11:59:44+08:00">
                2021-03-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h1><p>管理软件工程的工具</p>
<p> 3.需要改进项目的开发和管理，需要maven<br>    1）maven可以管理jar文件<br>    2）自动下载jar和他的文档，源代码<br>    3）管理jar直接的依赖， a.jar需要b.jar ， maven会自动下载b.jar<br>    4）管理你需要的jar版本<br>    5）帮你编译程序，把java编译为class<br>    6）帮你测试你的代码是否正确。<br>    7）帮你打包文件，形成jar文件，或者war文件<br>    8）帮你部署项目</p>
<p> 4.构建： 项目的构建。<br>   构建是面向过程的，就是一些步骤，完成项目代码的编译，测试，运行，打包，部署等等。<br>   maven支持的构建包括有：<br>    1.清理， 把之前项目编译的东西删除掉，为新的编译代码做准备。<br>    2.编译， 把程序源代码编译为执行代码， java-class文件<br>    3.测试， maven可以执行测试程序代码，验证你的功能是否正确。<br>    4.报告， 生成测试结果的文件， 测试通过没有。<br>    5.打包， 把你的项目中所有的class文件，配置文件等所有资源放到一个压缩文件中。<br>                通常java程序，压缩文件是jar扩展名的。对于web应用，压缩文件扩展名是.war<br>    6.安装， 把5中生成的文件jar，war安装到本机仓库<br>    7.部署， 把程序安装好可以执行。</p>
<p> 5.maven核心概念： 用好maven，了解这些概念<br>①POM ：pom.xml ,  pom翻译过来叫做项目对象模型。<br>         maven把一个项目当做一个模型使用。控制maven构建项目的过程，管理jar依赖。</p>
<p>②约定的目录结构 ： maven项目的目录和文件的位置都是规定的。</p>
<p>③坐标 ： 是一个唯一的字符串，用来表示资源的。</p>
<p>④依赖管理 ： 管理你的项目可以使用jar文件</p>
<p>⑤仓库管理（了解） ：你的资源存放的位置</p>
<p>⑥生命周期 (了解) ： maven工具构建项目的过程，就是生命周期。</p>
<p>⑦插件和目标（了解）：执行maven构建的时候用的工具是插件</p>
<p>⑧继承</p>
<p>⑨聚合</p>
<h3 id="第二部分"><a href="#第二部分" class="headerlink" title="第二部分"></a>第二部分</h3><p> 1.maven约定的目录结构， 约定是大家都遵循的一个规则。</p>
<p>   每一个maven项目在磁盘中都是一个文件夹（项目-Hello）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Hello&#x2F;</span><br><span class="line"> ---&#x2F;src</span><br><span class="line"> ------&#x2F;main           #放你主程序java代码和配置文件</span><br><span class="line"> ----------&#x2F;java       #你的程序包和包中的java文件</span><br><span class="line"> ----------&#x2F;resources  #你的java程序中要使用的配置文件</span><br><span class="line"> ------&#x2F;test  #放测试程序代码和文件的（可以没有）</span><br><span class="line"> ----------&#x2F;java       #测试程序包和包中的java文件</span><br><span class="line"> ----------&#x2F;resources  #测试java程序中要使用的配置文件</span><br><span class="line"> </span><br><span class="line"> ---&#x2F;pom.xml  #maven的核心文件（maven项目必须有）</span><br></pre></td></tr></table></figure>

<p>设置本机存放资源的目录位置(设置本机仓库)：</p>
<ol>
<li>修改maven的配置文件， maven安装目录/conf/settings.xml<br>先备份 settings.xml</li>
<li>修改 <localRepository>  指定你的目录（不要使用中文目录） D:\work\maven_work\maven_repository</li>
</ol>
<p> 3.仓库<br>  1）仓库是什么： 仓库是存放东西的， 存放maven使用的jar 和 我们项目使用的jar</p>
<p>  2）仓库的分类<br>    &gt;本地仓库， 就是你的个人计算机上的文件夹，存放各种jar<br>    &gt;远程仓库， 在互联网上的，使用网络才能使用的仓库</p>
<p>  3）仓库的使用，maven仓库的使用不需要人为参与。 </p>
<p> 4.pom:项目对象模型，是一个pom.xml文件<br>1）坐标：唯一值， 在互联网中唯一标识一个项目的<br>    <groupId>公司域名的倒写</groupId><br>    <artifactId>自定义项目名称</artifactId><br>    <version>自定版本号</version></p>
<p>2） packaging： 打包后压缩文件的扩展名，默认是jar ，web应用是war<br>packaging 可以不写， 默认是jar</p>
<ol start="3">
<li>依赖：dependencies 和dependency ，相当于是 java代码中import</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">你的项目中要使用的各种资源说明， 比我的项目要使用mysql驱动</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">	&lt;!--依赖  java代码中 import --&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;version&gt;5.1.9&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;&#x2F;dependencies&gt;</span><br></pre></td></tr></table></figure>

<p>4）properties：设置属性</p>
<p>5）build ： maven在进行项目的构建时， 配置信息，例如指定编译java代码使用的jdk的版本等</p>
<p>  5.maven生命周期， maven的命令，maven的插件</p>
<ul>
<li>maven的生命周期：就是maven构建项目的过程，清理，编译，测试，报告，打包，安装，部署</li>
<li>maven的命令：maven独立使用，通过命令，完成maven的生命周期的执行。maven可以使用命令，完成项目的清理，编译，测试等等</li>
<li> maven的插件： maven命令执行时，真正完成功能的是插件，插件就是一些jar文件， 一些类。</li>
</ul>
<p>1）单元测试（测试方法）：用的是junit， junit是一个专门测试的框架（工具）。<br>       junit测试的内容： 测试的是类中的方法， 每一个方法都是独立测试的。<br>                           方法是测试的基本单位（单元）。</p>
<p>  2）使用步骤<br>     1.加入依赖，在pom.xml加入单元测试依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 单元测试 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;junit&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;junit&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.11&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;scope&gt;test&lt;&#x2F;scope&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<p> 2.在maven项目中的src/test/java目录下，创建测试程序。<br>    推荐的创建类和方法的提示：<br>     1.测试类的名称 是Test + 你要测试的类名<br>     2.测试的方法名称 是：Test + 方法名称</p>
<p>​     例如你要测试HelloMaven ,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">创建测试类 TestHelloMaven</span><br><span class="line">   @Test</span><br><span class="line">   public void testAdd()&#123;</span><br><span class="line">      测试HelloMaven的add方法是否正确</span><br><span class="line">   &#125;   </span><br></pre></td></tr></table></figure>

<p>​     其中testAdd叫做测试方法，它的定义规则<br>​     1.方法是public的，必须的<br>​     2.方法没有返回值， 必须的<br>​     3.方法名称是自定义的，推荐是Test + 方法名称<br>​     4.在方法的上面加入 @Test</p>
<p> 3)mvn compile </p>
<p>编译main/java/目录下的java 为class文件， 同时把class拷贝到 target/classes目录下面，把main/resources目录下的所有文件都拷贝到target/classes目录下</p>
<h3 id="第三部分"><a href="#第三部分" class="headerlink" title="第三部分"></a>第三部分</h3><p>1.在idea中设置maven ，让idea和maven结合使用。 </p>
<ul>
<li>idea中内置了maven ，一般不使用内置的， 因为用内置修改maven的设置不方便。</li>
<li>使用自己安装的maven， 需要覆盖idea中的默认的设置。让idea指定maven安装位置等信息</li>
</ul>
<p>2.使用模版创建项目<br>  1）maven-archetype-quickstart : 普通的java项目<br>  2）maven-archetype-webapp : web工程</p>
<h3 id="第四部分"><a href="#第四部分" class="headerlink" title="第四部分"></a>第四部分</h3><p>1.依赖范围， 使用scope表示的。<br>scope的值有 compile, test, provided ,默认是compile<br>    scope:表示依赖使用的范围，也就是在maven构建项目的那些阶段中起作用。<br>        maven构建项目  编译， 测试 ，打包， 安装 ，部署 过程（阶段）</p>
<h3 id="第五部分"><a href="#第五部分" class="headerlink" title="第五部分"></a>第五部分</h3><p>  maven常用操作<br>  1.maven的属性设置<br>     <properties> 设置maven的常用属性<br>  2.maven的全局变量</p>
<p>自定义的属性，1.在<properties> 通过自定义标签声明变量（标签名就是变量名）2.在pom.xml文件中的其它位置，使用 ${标签名} 使用变量的值</p>
<p>自定义全局变量一般是定义 依赖的版本号， 当你的项目中要使用多个相同的版本号，先使用全局变量定义， 在使用${变量名}</p>
<p>  3.资源插件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span><span class="comment">&lt;!--所在的目录--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--包括目录下的.properties,.xml 文件都会扫描到--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">&lt;!—filtering 选项 false 不启用过滤器， *.property 已经起到过滤的作用了 --&gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h1 id="动态代理：-基于反射机制。"><a href="#动态代理：-基于反射机制。" class="headerlink" title="动态代理： 基于反射机制。"></a>动态代理： 基于反射机制。</h1><h5 id="什么是动态代理-？"><a href="#什么是动态代理-？" class="headerlink" title="什么是动态代理 ？"></a>什么是动态代理 ？</h5><p>使用jdk的反射机制创建对象。jdk动态代理，必须有接口，目标类必须实现接口， 没有接口时，需要使用cglib动态代理</p>
<h5 id="动态代理能做什么-？"><a href="#动态代理能做什么-？" class="headerlink" title="动态代理能做什么 ？"></a>动态代理能做什么 ？</h5><p>可以在不改变原来目标方法功能的前提下， 可以在代理中增强自己的功能代码。</p>
<h5 id="使用代理模式的作用"><a href="#使用代理模式的作用" class="headerlink" title="使用代理模式的作用"></a>使用代理模式的作用</h5><p>  1.功能增强： 在你原有的功能上，增加了额外的功能。 新增加的功能，叫做功能增强。</p>
<p>  2.控制访问： 代理类不让你访问目标，利用代理访问</p>
<h5 id="两种代理"><a href="#两种代理" class="headerlink" title="两种代理"></a>两种代理</h5><ul>
<li>静态代理：（繁琐）</li>
<li>动态代理：（常用）</li>
</ul>
<h5 id="动态代理的实现："><a href="#动态代理的实现：" class="headerlink" title="动态代理的实现："></a>动态代理的实现：</h5><ol>
<li><p>jdk动态代理： 使用java反射包中的类和接口实现动态代理的功能。反射包：java.lang.reflect。里面有三个类 ： InvocationHandler , Method, Proxy.</p>
</li>
<li><p>cglib动态代理: cglib是第三方的工具库， 创建代理对象。</p>
<pre><code>                         cglib的原理是继承， cglib
</code></pre>
<p> 通过继承目标类，创建它的子类，在子类中重写父类中同名的方法， 实现功能的修改。因为cglib是继承，重写方法，所以要求目标类不能是final的， 方法也不能是final的。cglib的要求目标类比较宽松， 只要能继承就可以了。</p>
<pre><code>        ​          
</code></pre>
<h5 id="jdk动态代理："><a href="#jdk动态代理：" class="headerlink" title="jdk动态代理："></a>jdk动态代理：</h5></li>
<li><p>反射， Method类，表示方法。类中的方法。 通过Method可以执行某个方法。</p>
</li>
<li><p>jdk动态代理的实现。反射包 java.lang.reflect , 里面有三个类 ： InvocationHandler , Method, Poxy.</p>
<ol>
<li>InvocationHandler 接口（调用处理器）：invoke()方法：表示代理对象要执行的功能代码。代理类要完成的功能就在invoke()方法中。</li>
<li>Method类：表示目标类中的方法。作用：通过Method可以执行某个目标类的方法，Method.invoke();<br>method.invoke(目标对象，方法的参数)</li>
<li>Proxy类：核心的对象，创建代理对象。之前创建对象都是 new 类的构造方法()<br>现在我们是使用Proxy类的方法，代替new的使用。 </li>
</ol>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZYK</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
